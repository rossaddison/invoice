<h6 id="invoice">Краткое описание разработки: (...resources/views/invoice/info/invoice.php)</h6><p> <b>Цель: Разработать систему выставления счетов, аналогичную InvoicePlane, с <s>интеграцией новейшей версии jQuery, а также</s> функциями безопасности Yii3, Snyk и CodeQl, используя wampserver в качестве тестовой платформы для WAMP, а также облегченную версию Alpine / более требовательную Ubuntu 22.04 LTS для LAMP.</b></p><p> Меньше внимания уделяется использованию JavaScript из-за уязвимостей в безопасности jQuery. Больше внимания уделяется использованию PHP-форм вместо JavaScript.</p><p> Компания vultr.com из Франкфурта предоставила бесплатную спонсорскую поддержку для тестирования сайта yii3i.online.<p><p> <b>Задачи на будущее - Долгосрочные цели</b></p><p> 1. Внедрена <s>интеграция платежных шлюзов,</s> соответствующих стандарту PCI: Stripe, Amazon Pay, Braintree и Mollie.</p><p> 2. Должность бухгалтера предполагает умение регистрировать платежи по счетам-фактурам.</p><p> <s>3. Включите логотип, относящийся к конкретным <b>персональным данным компании,</b> в счет-фактуру в формате PDF.</s></p><p> 4. Приемочные испытания счета-фактуры</p><p> 5. В ходе тестирования системы электронного выставления счетов с использованием PeppolHelper необходимо дополнительно проверить и учесть возможные исключения.</p><p> <s>6. Фильтры, которые будут введены в сетки.</s></p><p> <s>7. Улучшите шаблон индекса генератора, используя функции Yiisoft.</s></p><p> <s>8. Добавьте изображения товара.</s></p><p> <s>9. Удалите все переменные $s, передаваемые в представления, поскольку эта переменная определена в файле config/params.php.</s></p><p> 10. Повышение квалификации в области Docker.</p><br> <code>&#39;yiisoft/view&#39; =&gt; [ &#39;basePath&#39; =&gt; &#39;@views&#39;, &#39;parameters&#39; =&gt; [ &#39;assetManager&#39; =&gt; Reference::to(AssetManager::class), &#39;urlGenerator&#39; =&gt; Reference::to(UrlGeneratorInterface::class), &#39;currentRoute&#39; =&gt; Reference::to(CurrentRoute::class), &#39;translator&#39; =&gt; Reference::to(TranslatorInterface::class), // yii-invoice - Below parameters are specifically used in views/layout/invoice &#39;s&#39; =&gt; Reference::to(SettingRepository::class), &#39;session&#39; =&gt; Reference::to(SessionInterface::class), &#39;datehelper&#39; =&gt; Reference::to(DateHelper::class), &#39;pageSizeLimiter&#39; =&gt; Reference::to(PageSizeLimiter::class), &#39;gridComponents&#39; =&gt; Reference::to(GridComponents::class) ], ],</code></p><p> <s>Создание шаблона PDF-файла при отправке электронного письма.</s></p><p> <s>Работа над информационными вопросами.</s></p><p> Работа в процессе — краткосрочные цели</p><p> <s>Псалом 2-го уровня - Тестирование</s></p><p> <s>Удаление неработающего кода с помощью тестирования по Псалму 3.</s></p><p> <s>Генератор языковых массивов с помощью Google Переводчика</s></p><p> <s>На все счета-фактуры, даты которых попадают в диапазон начальной и конечной дат в системе CompanyPrivate, будет загружен соответствующий логотип.</s></p><p> <s>Для данной компании. Частная запись, прикрепленная к этим счетам-фактурам.</s></p><p> <s>Логотип CompanyPrivate будет автоматически добавлен в счет/предложение в зависимости от того, попадает ли дата выставления счета в диапазон между начальной и конечной датами.</s></p><p> Представляем PayPal.</p><p> Представляем способ оплаты с помощью QR-кода, используемый платежной системой PayTm в Индии, и сравниваем его с методом Stripe.</p><p> Для этой цели сначала необходимо внедрить систему общего налога с продаж (GST).</p><p> Проверка соответствия кредитных нот счетам-фактурам с возвратом средств (в случае совершения платежа), привязанным к каждому из платежных шлюзов.</p><p> Повторная проверка процедуры регистрации, поскольку класс аутентификации промежуточного ПО перемещен в заголовок группы.</p><p> Тестирование платежного шлюза на Alpine</p><p> Характеристики обратного вызова, а именно C:\wamp128\www\invoice\src\Auth\Trait\Callback.php, еще предстоит протестировать.</p><p> <b>2 января 2026 г.</b></p><p> php 8.5: composer.json Пакеты, связанные с Yiisoft, пока не готовы для php8.5 ... отмечены знаком &quot;больше&quot;.</p><p><pre>
      Примечание. HasOne по умолчанию будет использовать fkAction: CASCADE &amp; Camelcase salesOrder_id
      внешний ключ, создающий конфликт с sales_order_id в формате snake case.
     
      Решение: Укажите внешний ключ (outerKey) в таблице. 
      Это сделано специально для того, чтобы избежать конфликтов между автоматически вставленными элементами.
      Внешние ключи в таблицах в формате Camelcase во время построения схемы после добавления сущностей.
      изменения, например, в файле .env: BUILD_DATABASE=true ... BUILD_DATABASE
      
      #[HasOne(target: SalesOrderAmount::class, outerKey: &#39;sales_order_id&#39;)]
      private readonly SalesOrderAmount $sales_order_amount;

      Интересно, что эта проблема не возникает с сущностью «Цитата», потому что
      Название Quote состоит всего из одного слова, в отличие от SalesOrder, которое состоит из двух слов.
      и это, вероятно, способствует созданию внешнего ключа в формате CamelCase.
      проблема.
      
      Связанная логика:
      https://cycle-orm.dev/ ...
      docs/relation-has-one/current/en#differences-from-belongsto
    </pre></p><p><b>22 декабря 2025 г.</b></p><p> OpenTags с классами: Замена искомого html-элемента div class=&quot;row mb4&quot; на Html::openTag(&#39;div&#39;, [&#39;class&#39; =&gt; &#39;row mb4&#39;])</p><p> Поиск: &lt;(\w+)\s+class=&quot;([^&quot;]*)&quot;[^&gt;]*&gt;</p><p> Заменить: <code>Html::openTag(&#39;$1&#39;, [&#39;class&#39; =&gt; &#39;$2&#39;]);</code></p><p> Закрывающие теги без классов</p><p> Поиск:</(\w+)></p><p> Заменить: <code>Html::closeTag(&#39;$1&#39;);</code></p><p><b>20 декабря 2025 г.</p><p> Добавьте функцию группировки в файл inv/index.php, используя функцию обратного вызова перед вызовом.</p><p> <b>19 декабря 2025 г.</b></p><p> Уменьшите количество обязательных полей в клиентской форме.</p><p> В Angular можно приостанавливать отображение всплывающих сообщений, в частности, в файле info/invoice.php.</p><p> Возможность скрывать и отображать столбцы, применяемые как к индексу товаров, так и к индексу клиентов.</p><p> <b>14 декабря 2025 г.</b></p><p> Создан генератор товаров. Он использует поле family_commalist и добавляет префикс к полю family_productprefix для генерации товаров с их названиями. Для заполнения поля commalist в форме семейства создан Angular-элемент выбора номеров.</p><p> <b>8 декабря 2025 г.</b></p><p> Используйте класс native-reset для сжатия выпадающих списков фильтров в индексе inv.</p><p> Используйте класс `table-responsive` для элемента `inv index`, чтобы на странице поместилось больше столбцов.</p><p> Отображать всплывающие сообщения следует только в том случае, если параметр disable_flash_messages равен 0.</p><p> <b>7 декабря 2025 г.</b></p><p> Добавьте пользовательские поля в раздел «Семья».</p><p> Улучшите файл invoice/inv/index.php, улучшив информацию, касающуюся адреса клиента.</p><p> Новый файл invoice-typescript-iife.js скомпилирован и будет включен в основную ветку при использовании версии 7.</p><p> Тестирование Microsoft Typescript на Go v7: TYPESCRIPT_GO_V7_COMPATIBILITY_TESTING_GUIDE.MD</p><p> <b>5 декабря 2025 г.</b></p><p> Включает 7 дополнительных языков: игбо, йоруба, хауса, белорусский, иврит, шотландский гэльский.</p><p> Краткая процедура добавления собственного языка:</p><p> Шаг 1: config/web/params.php</p><p> Шаг 2: src/ViewInjection/LayoutViewInjection.php</p><p> Шаг 3: resources/views/layout/... все PHP-файлы</p><p> Шаг 4: Функция SettingRepository locales() ... выбранная локаль в выпадающем списке Google Translate.</p><p> Включены дополнительные переводы на все языки.</p><p> Сокращение кода: элементы выпадающего списка преобразованы в переменные в файле src/ViewInjection/LayoutViewInjection.php.</p><p> Удалить общедоступные ресурсы можно только из командной строки. Удалено из главного меню.</p><p> Функция скрипта shorten() сокращает строки с &quot;слишком длинным значением ключа&quot; в файле output_overwrite/app.php, обнаруженные правилом SonarQube s103.</p><p> Далее: Тест на совместимость Microsoft Typescript и Go в отдельной ветке &#39;typescript-go-v7-compatibility-test&#39; с использованием VS Code.</p><p> <b>29 ноября 2025 г.</b></p><p> Тестирование мобильных телефонов</p><p> Добавьте редактируемую ссылку для каждого пользовательского поля, чтобы можно было редактировать поля ввода.</p><p> Удалите ненужный раздел «Новый» в окне просмотра коммерческого предложения/заказа на продажу/счета-фактуры. Новые позиции добавляются с помощью отдельных форм.</p><p> <b>26 ноября 2025 г.</b></p><p> 1. SalesOrder принимает как задачи, так и товары.</p><p> 2. После того, как заказ на продажу перейдет в стадию «Генерация», можно сформировать счет-фактуру.</p><p> 3. Некоторые ресурсы были интегрированы в npm на случай, если разработчик захочет использовать путь @npm в папке assets для ссылки на ресурсы, вместо использования CDN. Лично я предпочитаю CDN, потому что они работают быстрее при наличии интернета.</p><p> 4. В представлении заказа на продажу указано место доставки. В PDF-файле место доставки пока не указано.</p><p> Далее: Добавьте над заказом на продажу панель инструментов на языке TypeScript, позволяющую изменять статус.</p><p> В столбец с флажками в индексе коммерческих предложений добавьте активный флажок с возможностью выбора и добавления счета-фактуры.</p><p> <b>22 ноября 2025 г.</b></p><p> Обновление SonarQube для сокращения кода — современный подход заключается в использовании password_hash для генерации соли. Поэтому сделайте его необязательным с помощью $legacyExternalSaltRequired.</p><p> Подготовка к PHP 8.5 — явное объявление переменной `$variable` как `?string $variable = null` вместо `$variable = null`.</p><p> Файл workflow.cs.yml, связанный с php-cs-fixer, будет использоваться в тестовом режиме без параметра --diff для сокращения времени генерации выходных данных... пока что. Поэтому пока полагайтесь только на параметр --verbose для вывода примененных правил.</p><p> Сохраните файлы .ini cli и phpForApache в egini для настройки WampServer для версий 8.4.15 и 8.5.0.</p><p> <b>11 ноября 2025 г.</b></p><p> Теперь можно добавить задачу через Quote.</p><p> Netbeans синхронизирован с VS Code.</p><p> Замените таблицу partial_item_table в коммерческом предложении на таблицу partial_item_table в счете-фактуре (с учетом корректировок).</p><p> Функциональность функции «Запрос предложения» адаптирована для функции «Счет».</p><p> TypeScript подготовлен для интеграции с Angular-eslint.</p><p> Внедрена технология ES2024.</p><p> Исправлена ​​ошибка: в каждом отдельном предложении повторялась сумма предложения. Код счета-фактуры принят.</p><p> Далее: Добавьте в коммерческое предложение надбавки, чтобы полностью синхронизировать его со счетом-фактурой.</p><p> <b>5 ноября 2025 г.</b></p><p>Устранено 54 уязвимости с помощью инструмента анализа кода Snyk. Теперь этот инструмент будет работать параллельно с инструментом анализа зависимостей Snyk, который сыграл важную роль в выявлении CVE для jQuey. Локально доступны m.bat и Makefile: добавлен Snyk Code для статического анализа безопасности, а также ESLint для всесторонней проверки качества кода. Добавлены скрипты безопасности npm: &#39;security:quick&#39; (только для уязвимостей высокой степени серьезности), &#39;security:full&#39; (полный анализ), &#39;security:deps&#39; (уязвимости зависимостей). Выявлено 4 приоритетные проблемы безопасности, требующие внимания: 3 уязвимости XSS в файлах JavaScript и 1 жестко закодированный секрет. Созданы конфигурационные файлы .snyk и .snykignore для управления политиками безопасности. Добавлены команды безопасности в m.bat ([5f] Quick, [5g] Full, [5h] Dependencies) и Makefile (sq, sf, sd) для удобного доступа. Существуют альтернативы eslint, но посмотрим, что принесет версия 10 eslint в плане устаревших функций. Понижен приоритет в онлайн-настройках Snyk с 700 до 0, чтобы выявлялись ЛЮБЫЕ потенциальные проблемы, включая высокие, средние и низкие. Основное внимание будет уделено уязвимостям в чистом JavaScript и TypeScript, появившимся в VS Code. Анализ зависимостей: ранее основное внимание уделялось jQuery, а теперь добавлен анализ безопасности кода (Code Security Analysis) для обеспечения дополнительного уровня защиты.</p><p> <b>2 ноября 2025 г.</b></p><p> В файле App\Auth\Permissions.php теперь можно централизованно создавать строки разрешений.</p><p> Исправление ошибки: Сущность Продукт. После внесения изменений... измените значение BUILD_DATABASE в файле .env на true, а затем верните изменения. Альтернативный вариант: Удалите файл src\runtime\schema.php и разрешите программе пересобрать схему.</p><p> Удалите разрешение ChangeController changePasswordForAnyUser ... администратор не имеет права изменять пароль. Имя пользователя остается доступным только для чтения для всех пользователей, включая администратора.</p><p> Улучшение пользовательских полей: добавлена ​​поддержка списков радиокнопок, URL-адресов, адресов электронной почты и текстовых полей.</p><p> Улучшен рабочий процесс «Коммерческое предложение — Счет-фактура»: добавлены двусторонние кнопки навигации между коммерческими предложениями и счетами-фактурами. Панель инструментов коммерческого предложения теперь включает индикаторы рабочего процесса утверждения для преобразования заказов на продажу/счетов-фактур. Обновлен метод quote_to_invoice_confirm контроллера QuoteController, теперь он возвращает new_invoice_id для беспрепятственного перенаправления. Добавлены ключи перевода для сообщений об утверждении.</p><p> Улучшения в области безопасности: Обновлен рабочий процесс php-cve-check.yml до NVD API 2.0 с улучшенным сканированием уязвимостей, включая аудит Composer и проверку рекомендаций по безопасности PHP. Добавлена ​​комплексная отчетность и поддержка нескольких веток.</p><p> Проверка зависимостей: проверено, что все зависимости npm актуальны, нет устаревших пакетов или уязвимостей безопасности. Система сборки TypeScript с esbuild@0.25.12 успешно компилируется (вывод 43,6 КБ). Все пакеты, включая Bootstrap 5.3.8, TypeScript 5.9.3 и ESLint 9.39.0, обновлены.</p><p> Исправлена ​​ошибка выбора товаров: устранена проблема с товарами с нулевым значением, отображавшимися в модальных окнах поиска товаров в счете/предложении. Добавлен метод findAllPreloadedWithPrice() в ProductRepository, исключающий товары с нулевой ценой. Обновлены InvController, QuoteController и ProductController для использования отфильтрованных списков товаров для операций .select-items-confirm-inv.</p><p> Исправлена ​​ошибка в работе панели инструментов: Исправлена ​​проблема с потерей функциональности панели инструментов счетов-фактур из-за рефакторинга системы разрешений. В InvController обновлено использование констант Permissions вместо строковых литералов для вызовов hasPermission(), что восстановило полную функциональность панели инструментов на страницах счетов-фактур/просмотров.</p><p> Аудит целостности системы: Проведена комплексная очистка после сбоя панели инструментов. Проверен весь синтаксис PHP, компиляция TypeScript (вывод 43,6 КБ), согласованность системы разрешений, логика фильтрации продуктов и состояние зависимостей. Все критически важные системы проверены и функционируют корректно.</p><p> <b>Восстановление системы разрешений после сбоя:</b> комплексный аудит выявил несоответствия разрешений в формате camelCase, вызывавшие сбои в работе панели инструментов. Исправлено 24 разрешения в формате camelCase в 6 контроллерах (InvController, QuoteController, ClientPeppolController, ClientController, InvRecurringController, InvoiceController). Проверены все 112 контроллеров в подпапках src/Invoice — дополнительных разрешений в формате camelCase не обнаружено. Система разрешений теперь на 100% согласована с использованием констант разрешений.</p><p> <b>Шаблоны регулярных выражений NetBeans для будущего мониторинга разрешений в формате camelCase:</b></p><p><pre> <code># Find camelCase permissions (primary monitoring pattern) hasPermission\([&#39;\&quot;]([az]+[AZ][a-zA-Z]*)[&#39;\&quot;] # Find any string permissions for review hasPermission\([&#39;\&quot;][^&#39;\&quot;]*[&#39;\&quot;] # Check for consistent Permissions imports ^use App\\Auth\\Permissions; # Comprehensive permission validation pattern (editInv|viewInv|editPayment|viewPayment|editUser|editClientPeppol|noEntryToBaseController)</code> <b>Исключение для товаров с нулевой ценой:</b> <code># Find camelCase permissions (primary monitoring pattern) hasPermission\([&#39;\&quot;]([az]+[AZ][a-zA-Z]*)[&#39;\&quot;] # Find any string permissions for review hasPermission\([&#39;\&quot;][^&#39;\&quot;]*[&#39;\&quot;] # Check for consistent Permissions imports ^use App\\Auth\\Permissions; # Comprehensive permission validation pattern (editInv|viewInv|editPayment|viewPayment|editUser|editClientPeppol|noEntryToBaseController)</code></pre></p><p> Реализована бесшумная фильтрация товаров с нулевой ценой для модальных окон выбора товаров. Используется метод findAllPreloadedWithPrice() для обеспечения единообразной фильтрации во всех модальных окнах выбора позиций счета и коммерческого предложения. Товары с нулевой ценой автоматически исключаются из списков выбора без уведомления пользователя, чтобы избежать повторяющихся всплывающих сообщений. Фильтрация товаров остается активной, но работает незаметно.</p><p> <b>Исправлены инструменты разработки:</b> обновлена ​​конфигурация .php-cs-fixer.php для использования набора правил &#39;@PER-CS2x0&#39; вместо устаревшего &#39;@PER-CS2.0&#39; и добавлено ограничение версии PHP 8.3 для обеспечения согласованного форматирования кода во всех средах. Устранен конфликт зависимостей npm путем понижения версии ESLint с v9.39.0 до v8.57.0 для совместимости с eslint-plugin-deprecation@3.0.0. Добавлена ​​конфигурация .eslintrc.cjs для проверки синтаксиса TypeScript. PHP CS Fixer и ESLint теперь работают без предупреждений об устаревании. Удалена дублирующаяся функция addProducts из InvController, поскольку существующий модальный рабочий процесс обеспечивает более высокую функциональность.</p><p> <b>28 октября 2025 г.</b></p><p> Следующие файлы были объединены в один файл TypeScript IIFE invoice-typescript-iife.js: &#39;rebuild/js/quote.js&#39;, &#39;rebuild/js/inv.js&#39;, &#39;rebuild/js/salesorder.js&#39;, &#39;rebuild/js/client.js&#39;, &#39;rebuild/js/family.js&#39;, &#39;rebuild/js/product.js&#39;, &#39;rebuild/js/setting.js&#39;,</p><p> Список селекторов классов и идентификаторов находится в разделе часто задаваемых вопросов — Анализ JavaScript — В будущем тесты Codeception будут основаны на них.</p><p> Скомпилированный TypeScript был сопоставлен с веткой до удаления jQuery, что гарантирует отсутствие пропущенных JavaScript-кодов.</p><p> Создан отдельный стандартный файл cron.js.</p><p> <b>26 октября 2025 г.</b></p><p> Исправлена ​​ошибка: Аннотация длины: include skipOnEmpty = true</p><p> Исправлена ​​ошибка: Удалены позиции счета-фактуры. src\Invoice\Asset\rebuild\js\inv.js</p><p> Использование VS Code позволит увеличить покрытие тестами с 18,3% до примерно 40%.</p><p> Новые счета-фактуры и коммерческие предложения перенаправляются на новый счет-фактуру и коммерческое предложение соответственно, а не на индекс.</p><p> Функция копирования счетов перенаправляет на страницу просмотра нового счета.</p><p> <b>25 октября 2025 г.</b></p><p> Сейчас я использую VS Code и интегрирую его с SonarQube Cloud с помощью метода подключения.</p><p> Это делается для снижения дублирования кода.</p><p> Для сокращения объема кода создан виджет FormFields. Каждая функция адаптирована под конкретные потребности сущности.<p> Далее: Пользовательские поля: Перенести базовую функциональность в BaseController, чтобы сократить объем кода, и попытаться реализовать какую-либо проверку пользовательских полей.</p><p> Также удалите значение &#39;NULL&#39; из пользовательского поля.</p><p> <b>24 октября 2025 г.</b></p><p> Зависимость от jQuery полностью удалена через ветку remove_jquery.</p><p> Создана ветка pre_jquery_deletion</p><p> Улучшено отображение пользовательских полей: теперь выбранные элементы из выпадающего списка с множественным выбором (или вариантами ответа) отображаются в одном текстовом поле. </p><p><table style="border:2px solid #000; border-collapse:collapse; width:100%;" cellpadding="6" cellspacing="0"><thead><tr><th style="border:1px solid #000; padding:6px; text-align:left;"> Причина</th><th style="border:1px solid #000; padding:6px; text-align:left;"> Объяснение</th><th style="border:1px solid #000; padding:6px; text-align:left;"> Влияние на приложение</th><th style="border:1px solid #000; padding:6px; text-align:left;"> Что изменилось?</th><th style="border:1px solid #000; padding:6px; text-align:left;"> Рекомендуемые действия</th></tr></thead><tbody><tr><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Размер пакета и производительность по нагрузке</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> jQuery добавляет большую глобальную зависимость, которая увеличивает объем передаваемых данных на страницу и замедляет первоначальную загрузку.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Меньший размер JS-пакетов и более быстрая первая отрисовка после удаления.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Заменили использование jQuery на небольшие вспомогательные функции на чистом JavaScript и современные API (fetch, Element.closest, URLSearchParams).</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Используйте небольшие и общие утилиты (одна вспомогательная функция для Ajax-запросов) и разделяйте код там, где это уместно.</td></tr><tr><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Доступны современные API браузеров.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Встроенные API для работы с DOM, fetch, classList, dataset и другие API охватывают большинство задач, ранее решавшихся с помощью jQuery.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Код может быть более прямым и зачастую более быстрым (с меньшим количеством косвенных обращений).</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Переписаны механизмы делегирования событий, AJAX и манипулирования DOM для использования API, соответствующих стандартам.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;">Предпочтительнее использовать нативные API; применять полифилы только при поддержке старых браузеров, которые этого требуют.</td></tr><tr><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Поддерживаемость и читаемость</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Использование чистого JavaScript позволяет избежать смешения парадигм и снижает когнитивную нагрузку для начинающих разработчиков, незнакомых с jQuery.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Более понятные пути выполнения кода и меньше неожиданностей во время выполнения, связанных с глобальными переопределениями.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Нормализованные селекторы и вспомогательные функции (parsedata, getJson) для централизации обработки данных.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Документируйте общие вспомогательные функции и храните их в одном общем файле, чтобы избежать дублирования.</td></tr><tr><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Безопасность и поверхность атаки</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Меньший по размеру и более целенаправленный код уменьшает поверхность атаки и вероятность непреднамеренного импорта небезопасных плагинов.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Снижение риска, связанного со сторонними плагинами jQuery или неправильным использованием API.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Удалены глобальные вызовы плагина jQuery; используются явные API DOM и безопасный парсинг JSON.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Проверьте все оставшиеся сторонние скрипты на совместимость с CSP/nonce и выполните очистку динамических данных на стороне сервера.</td></tr><tr><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Ошибки интерференции и селекторов</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Повторное использование глобальных идентификаторов/классов и обработчики, управляемые jQuery, ранее приводили к случайным отправкам форм между разными приложениями и конфликтам селекторов.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Исправлены ошибки, из-за которых один из обработчиков отправлял неверную форму (проблемы CSRF, перенаправления при выходе из системы).</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Удалены общие идентификаторы элементов (например, btn-submit) и внедрена логика делегирования на основе классов и метода closest(form).</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Проверяйте шаблоны, чтобы избежать дублирования идентификаторов, отдавайте предпочтение определенным классам и убедитесь, что входные данные CSRF находятся внутри формы, которую они защищают.</td></tr><tr><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Тестирование и автоматизация</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Тестирование на чистом JavaScript проще в средах без графического интерфейса и снижает зависимость от ресурсоемких DOM-фильтров.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Упрощенные модульные и интеграционные тесты; меньше фиктивных/имитационных тестов для jQuery.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Обработчики событий добавляются с помощью addEventListener и являются детерминированными для тестов.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Добавьте модульные тесты для общих вспомогательных функций (getJson, parsedata) и интеграционные тесты для процессов отправки форм.</td></tr><tr><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Прогрессивное улучшение</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> В соответствующих случаях предпочтительнее использовать встроенные элементы управления (например, type=&quot;submit&quot;, form=&quot;...&quot;), чтобы базовая функциональность работала без JavaScript.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Повышенная отказоустойчивость (формы продолжают отправляться, даже если JavaScript дает сбой или блокируется).</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Изменено поведение элементов управления backSave: теперь используется стандартная отправка формы или атрибут формы вместо привязок/кнопок, требующих JavaScript.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Проведите аудит компонентов пользовательского интерфейса, чтобы они корректно работали при снижении производительности и сохраняли работоспособность резервных вариантов на стороне сервера.</td></tr><tr><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Усилия по миграции и последовательность</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Замена jQuery потребовала тщательной адаптации множества мелких функций (делегирование событий, сериализация массивов, семантика AJAX).</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Краткосрочный риск: отсутствие обработчиков или различия в сериализации (например, keylist[] против keylist) приводили к ошибкам.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;"> Внедрена небольшая общая вспомогательная функция для AJAX-запросов и реализована согласованная сериализация массивов в соответствии с ожиданиями сервера.</td><td style="border:1px solid #000; padding:6px; vertical-align:top;">Создайте контрольный список миграции, проведите тестирование всех страниц, которые ранее использовали jQuery, и централизуйте вспомогательные функции, чтобы избежать регрессий.</td></tr></tbody></table></p><p> Массив позиций пользовательских полей перемещен в SettingRepository.</p><p> Далее: уменьшение количества ошибок DOM.</p><p> <b>16 октября 2025 г.</b></p><p> Исправлена ​​ошибка: Главные страницы ... Настройки ... Вид ... Главная страница</p><p> <b>24 сентября 2025 г.</b></p><p> Файл Dependency Injector yii-auth-client.php создан в папке config/web/di</p><p> Функция AuthChoice интегрирована в AuthController.</p><p> Вместо AuthChoice используйте функцию absoluteButtons при аутентификации/входе в систему.</p><p> <b>3 сентября 2025 г.</b></p><p> После глобальной установки google-gemini/gemini-cli с помощью <code>npm install -g @google/gemini-cli</code> , создал файлы Readme, используя</p><p> Использование Google Gemini из командной строки и создание файла ge_min_i.bat, в частности, для анализа кода, создания документации и сводных отчетов в этом репозитории.</p><p> Исправлены ошибки при сортировке/фильтрации PDF-файлов и товаров, улучшены экраны индексации, а также усовершенствована обработка счетов-фактур в Peppol.</p><p> Обновления тестов Codeception и phpunit, а также улучшения скриптов для разработчиков (например, <code>m.bat</code> ).</p><p> <b>17 августа 2025 г.</b></p><p> Массивы Peppol были обновлены до версии от 24 ноября 2024 года. С момента обновления прошло более двух лет. Поле $vat для InvAllowanceCharge и InvItemAllowanceCharge было изменено на $vatOrTax, чтобы компании, не облагаемые НДС, могли включать налог GST или налог, аналогичный НДС, при работе с расходами на обработку, упаковку и доставку. Я добавил поля Packhandleship_tax и packhandleship_total в сущность InvAmount, которые будут отражать общую стоимость скидок и сборов по счетам-фактурам при использовании категорий в Peppol. Эти категории полезны в контексте, не связанном с Peppol, и особенно в контексте, не облагаемом НДС, поэтому был выбран более гибкий подход и переименование $vat в $vat_or_tax. Сущность InvAmount была скорректирована для размещения этих двух новых итоговых значений, которые фактически представляют собой поле с указанием чистой суммы скидок и сборов... то есть не только на упаковку, обработку и доставку. Индекс InvAllowanceCharge был модернизирован, чтобы обеспечить возможность индексирования и сортировки.</p><p> <b>Шаг 1:</b> Peppol ... Добавить родительскую сумму счета и сборы</p><p> <b>Шаг 2:</b> В разделе «Параметры» ... Добавить общую сумму к оплате и начисленные сборы.</p><p> <b>Шаг 3:</b> Используйте знак «+» для ввода скидок или сборов в отдельных позициях счета-фактуры.</p> Обновите экран просмотра, чтобы увидеть обновленные итоговые суммы, что позволит завершить перенаправления после ввода данных о скидке по счетам. NumberHelper работает независимо от обновления экрана и перенаправлений. Далее: добавьте несколько тестов Codeception, которые обеспечат безопасность этих концепций в случае обнаружения ошибок в дальнейшем с выводом уведомлений о сбоях в CLI.</p><p> <b>3 августа 2025 г.</b></p><p> Заменил тип данных int на float, поскольку сумма, отправляемая через Wonderful, обрезалась. Например, 3,60 фунта стерлингов обрезались до 3,00 фунтов стерлингов.</p><p> Возвращаемый URL работает, но атрибут ref обрезался, потому что в маршруте он отсутствовал, поэтому ref был включен в маршрут.</p><p> Для Wonderful предпочтительнее отображать более общее сообщение на странице завершения транзакции, которое компилируется в функции wonderful_complete контроллера PaymentInformationController.</p><p> Далее: Возврат средств по кредитной ноте, если оплата была произведена клиентом через Wonderful.</p><p> Далее: Включите в процесс выбора поставщика платежей OAuth2.0, например Tink, в процесс выбора Open Banking. Tink использует OIDC, поэтому это будет интересная интеграция.</p><p> Текущие платежные системы: ...src\Invoice\Setting\Trait\OpenBankProviders.php</p><p> <b>4 августа 2025 г.</b></p><p> Двухфакторная аутентификация (TFA) должна выполняться совместно с OAuth, поэтому в обратных вызовах в файле src/Auth/Trait/Callback.php теперь будет включена TFA, если она выбрана.</p><p> <b>1 августа 2025 г.</b></p><p> Исправлена ​​ошибка: при изменении ширины логотипа компании требовалось также изменить сам логотип.</p><p> API Open Banking Wonderful работает.</p><p> <strong>Шаги по использованию Wonderful API</strong></p><p> <b>Шаг 1:</b> Настройки ... Просмотр ... Онлайн-платежи ... Включить онлайн-платежи ... Добавить поставщика платежей ... Интернет-банкинг</p><p> <b>Шаг 2:</b> Перейдите на wonderful.co.uk и получите свой authToken, также известный как apiToken.</p><p> <b>Шаг 3:</b> Заполните и активируйте форму OpenBanking на той же странице.</p><p> <b>Шаг 4:</b> Если вы не используете Wonderful в качестве стороннего поставщика, оставьте поле apiToken пустым.</p><p><img src="/img/wonderful.jpg" height="300" width="450"/></p><p> <b>29 июля 2025 г.</b></p><p> Протестированы следующие платежные шлюзы: AmazonPay, Braintree, Stripe, Mollie.</p><p> <b>27 июля 2025 г.</b></p><p> Создан предварительный код Open Banking Wonderful.</p><p> Увеличил лимит запросов с 2 до 5 в файле config\web\di\rate-limit.php, поскольку это влияло на тесты Codeception.</p><p> Удалили Omnipay, поскольку он не соответствует стандартам PCI и недостаточно поддерживается.</p><p> <b>25 июля 2025 г.</b></p><p> Тестирование установки</p><p> <b>Шаг 1:</b> Создайте базу данных в phpMyAdmin, используя настройки по умолчанию - yii3_i</p><p> <b>Шаг 2:</b> Измените значение параметра BUILD_DATABASE=true в файле .env.</p><p> <b>Шаг 3:</b> Выберите ссылку public/index.php... дождитесь появления главного экрана.</p><p> <b>Шаг 4:</b> Измените значение параметра BUILD_DATABASE= в файле .env.</p><p> <b>Шаг 5:</b> Регистрация администратора</p><p> <b>Шаг 6:</b> Регистрация наблюдателя</p><p> <b>Шаг 7:</b> Войдите в систему как администратор и назначьте клиента наблюдателю... Учетные записи пользователей для выставления счетов</p><p> <b>19 июля 2025 г.</b></p><p> Замените файл styleci.yml на cs.yml</p><p> Цель: Структура файла cs.yml была изменена для проведения пробного запуска, после чего, при необходимости, будет создан запрос на слияние (pull request)... аналогично файлу styleci.yml.</p><p> PHP CS Fixer GitHub Actions workflow Adjusted</p><p> <b>18 июля 2025 г.</b></p><p> Добавьте новую функцию opCacheHealthCheck() в раздел App\Widget\PerformanceMetrics.</p><p> Используется в файле resources/views/layout/invoice.php для выявления некорректных настроек php.ini.</p><p> Замечательно! Технология Open Banking исключена из протокола OAuth2.0. Требуется authToken, а не authUrl.<p> Новая функция: getOpenBankingProvidersWithAuthUrl используется для различения поставщиков сторонних услуг, предлагающих OAuth 2.0, и тех, кто предоставляет его только через токен.</p><p> Интеграция Open Banking в PaymentInformationController</p><p> <b>15 июля 2025 г.</b></p><p> Создана ветка среды, которая проходит все тесты, но демонстрирует снижение производительности.</p><p> Улучшить формы смены пароля и сброса пароля.</p><p> Включите PHP 8.4 в файл invoice_build.</p><p> <b>12 июля 2025 г.</b></p><p> Внедрить поддержку OpenBanking в контроллеры AuthController и SignupController.</p><p> https://github.com/rossaddison/invoice/discussions/288</p><p> <b>10 июля 2025 г.</b></p><p> Создайте отдельный сервис для AmazonPay.</p><p> Создайте файл di\payment-service.php для повышения производительности.</p><p> Copilot создал запрос на слияние для Braintree.</p><p> Запрос закрыт в связи с достижением лимита запросов Copilot.</p><p> Статистически проанализированные данные, относящиеся к Брэйнтри, были предоставлены.</p><p> <b>9 июля 2025 г.</b></p><p> Создайте отдельный сервис для Stripe.</p><p> Повышение производительности: созданы DI-модули в файлах inv.php и quote.php.</p><p> Переместите код PaymentInformationController, связанный со Stripe, в отдельный сервис для Stripe.</p><p> Это сделано для облегчения проведения модульного тестирования в будущем.</p><p> Аналогичная работа начнется и с другими платежными системами.</p><p> <b>8 июля 2025 г.</b></p><p> В контроллере счетов (InvoiceController) создана дополнительная группа под названием «Кредитная нота».</p><p> Кредитные ноты могут быть сформированы, если оригинал счета-фактуры был отправлен.</p><p> Кредитное извещение — это просто «отменённый отправленный счёт-фактура».</p><p> Исправлена ​​ошибка: при создании кредитного авизо на основе счета-фактуры идентификатор creditinvoiceparent_id этого счета-фактуры устанавливается равным новому идентификатору кредитного авизо (фактически, идентификатору счета-фактуры).</p><p> Я не создавал отдельное подразделение по кредитным нотам.</p><p> Способы оплаты можно активировать. В выпадающих списках должны отображаться только активные способы оплаты.</p><p> Установите в качестве способа оплаты по умолчанию онлайн-платеж, поскольку работа с чеками или наличными усложняет ситуацию.</p><p> <b>7 июля 2025 г.</b></p><p> Добавьте более подходящие сообщения об ошибках в файл AuthController.php.</p><p> <b>5 июля 2025 г.</b></p><p> 1. routes.php - В функциях verifySetup и verifyLogin применяется ограничитель скорости, не связанный с промежуточным ПО.</p><p> 2. Значение параметра config\web\di\rate-limit уменьшено до 2 для большей строгости и безопасности.</p><p> 3. Выражение «превышен лимит скорости» заменяется на «достигнут лимит скорости».</p><p> 4. Примените рекомендации из https://github.com/rossaddison/invoice/pull/273</p><p> <b>4 июля 2025 г.</b></p><p> Сервис и сущность кода восстановления оказывают поддержку пользователю.</p><p> Возможность ввода 8-значного кода восстановления только на экране подтверждения входа в систему, то есть не во время настройки.</p><p> Скрипт, плавно исчезающий через 40 секунд после авторизации. Скрипты, сгенерированные ИИ, преобразованы в PHP.</p><p> Эффект затухания, реализованный с помощью PHP.</p><p> В URL-адресе больше нет надоедливого завершающего хеша. src/Service/WebControllerService Исправлена ​​ошибка: ?string = null, а не string = &#39;&#39;</p><p> <b>28 июня 2025 г.</b></p><p> Тестирование установки</p><p> Функция autoload.php в файле invoice была изменена таким образом, чтобы проверять наличие Composer. Это упрощает запуск InstallCommand с Symfony.</p><p> В файл m.bat добавлено подменю для установки.</p><p> Подменю установки включает в себя параметры «После установки Composer с Symfony», «Перед установкой Composer» и проверку наличия yiipath, в основном для Unix, и запускается независимо как install.bat.</p><p> <b>27 июня 2025 г.</b></p><p> Настройка обработки ошибок для PHP 8.4</p><p> <b>26 июня 2025 г.</b></p><p> Применил ректор и добавил 2 варианта ректоринга в файл m.bat.</p><p> Удалены файлы, которые больше не нужны для Google Translate, например, ip_lang.php.</p><p> Используйте вариант 5c с осторожностью, поскольку весь код может быть изменен. Сначала примените вариант 5b, то есть выполните команду --dry-run.</p><p> <b>24 июня 2025 г.</b></p><p> Восстановите Sentry с помощью vcs rossaddison/yii-sentry.</p><p> Зарегистрируйтесь для проведения тестирования производительности с помощью Sentry.</p><p> <b>21 июня 2025 г.</b></p><p> Скрипты для фильтрации используемых ключей перевода находятся в отдельной папке в корневом каталоге.</p><p> Включить хеш в функцию WebControllerService getRedirectResponse</p><p>Удалите символы подчеркивания из ключей перевода и замените их точками.</p><p> В файле resources/messages/en/app.php ключи упрощены и упорядочены.</p><p> В файле en/app.php заменены старые ключи, содержащие символ подчеркивания, в папках src и resources.</p><p> Скрипты, созданные программой Copilot, хранятся в папке scripts.</p><p> После выбора языкового варианта в выпадающем списке Google Translate и создания файла app.php происходит перенаправление на этот выпадающий список с использованием хеша.</p><p> <b>18 июня 2025 г.</b></p><p> Перенесите код, например, new Flash($session), в контейнер di в файле config/common/params/di/flash.php. После обсуждения автоматического внедрения зависимостей затронуто 53 контроллера.</p><p> <b>15 июня 2025 г.</b></p><p> Скрипт для фильтрации используемых ключей перевода, хранящихся в корневом каталоге.</p><p> <b>14 июня 2025 г.</b></p><p> Параметр uopz был удален из файла composer.json для обеспечения совместимости с Docker.</p><p> Требования к Docker для PHP снижены до версии 8.3.</p><p> Настройка репозитория в Docker</p><p><h5> Как подключить Docker на Linux, работающий в Docker Desktop, к базе данных WampServer phpMyAdmin</h5></p><p><ol><li class="step"> <strong>Обеспечьте доступ к WampServer MySQL из сети.</strong><ul><li> В конфигурационном файле MySQL вашего WampServer ( <code>C:\wamp\bin\mysql\mysql8.3.0\my.ini</code> ) установите:<pre><p> [mysqld]</p>
                 <p>bind-address=0.0.0.0</p></pre></li><li> Настройте файл config/common/params.php и переменную $dbHost в Docker на подходящий локальный IPv4-адрес... c:\&gt;ipconfig</li><li> Для применения изменений перезапустите MySQL через WampServer.</li></ul></li><li class="step"> <strong>Создайте пользователя MySQL для удаленного доступа.</strong><ul><li> Войдите в MySQL (желательно через phpMyAdmin или MySQL CLI) и выполните следующую команду:<pre>
CREATE USER &#39;root&#39;@&#39;host.docker.internal&#39; IDENTIFIED BY &#39;&#39;;
ПРЕДОСТАВИТЬ ВСЕ ПРИВИЛЕГИИ НА *.* КОМУ-ЛИБО &#39;root&#39;@&#39;host.docker.internal&#39;;
Скрыть привилегии;
          </pre></li><li>Это позволяет пользователю root подключаться с хоста host.docker.internal (мост Docker-to-host).</li></ul></li><li class="step"> <strong>Разрешить доступ через брандмауэр Windows</strong><ul><li> Откройте порт <b>3306</b> (или порт вашего MySQL) в брандмауэре Windows, чтобы разрешить входящие соединения.</li></ul></li><li class="step"> <strong>Узнайте IP-адрес вашего хоста Windows.</strong><ul><li> На компьютере с Windows выполните <code>ipconfig</code> , чтобы найти свой локальный IPv4-адрес (например, <code>192.168.1.100</code> ).</li></ul></li><li class="step"> <strong>Настройте ваше приложение Docker</strong><ul><li> В файле конфигурации базы данных вашего контейнера Docker (c:\...invoice\docker-compose.yml) используйте:<pre>
DB_HOST=192.168.1.100 # Используйте IP-адрес вашего хоста Windows
DB_PORT=3306
DB_USER=youruser
DB_PASS=вашпароль
          </pre></li><li><b>Не</b> используйте <code>localhost</code> или <code>host.docker.internal</code> , если это специально не указано.</li></ul></li><li class="step"> <strong>Проверьте соединение</strong><ul><li> Внутри контейнера Docker установите клиент MySQL, если это необходимо, и выполните следующую команду:</li><pre>
mysql -h 192.168.1.100 -u youruser -p
        </pre><li>Если соединение установлено, ваше приложение тоже должно работать.</li></ul></li></ol><p> <strong>Краткое содержание:</strong><br> Сделав MySQL доступным из сети, предоставив удаленным пользователям права доступа, открыв брандмауэр и указав свой IP-адрес Windows в конфигурации Docker, ваш контейнер Docker на Linux сможет подключиться к базе данных WampServer MySQL на вашем хосте Windows.</p><pre> <b>docker-composer.yml</b>
      услуги:
  php:
    изображение: yiisoftware/yii-php:8.3-apache
    рабочая директория: /app
    тома:
      - ./:/приложение
      - ~/.composer-docker/cache:/root/.composer/cache:delegated
    порты:
      - &#39;30080:80&#39;
    depends_on:
      - db
    среда:
      # Вы можете передавать параметры базы данных в качестве переменных окружения, если ваше приложение это поддерживает.
      # Среда разработки: Образ Docker Desktop docker-linux с использованием базы данных cycle/orm на Wampserver
      # Шаг 1: Настройки Docker Desktop: Откройте Docker Desktop ... Настройки ... Docker Engine
      # Добавьте или обновите раздел &quot;dns&quot;: например, &quot;dns&quot;: [&quot;8.8.8.8&quot;, &quot;1.1.1.1&quot;]
      # Шаг 2: Получите IP-адрес версии 4 по адресу c:\wamp\www\invoice&gt;ipconfig. Вставьте в DB_HOST: # Шаг 3: Измените C:\wamp\bin\mysql\mysql8.3.0\my.ini [mysqld]bind-address=0.0.0.0 # Шаг 4: phpadmin: CREATE USER &#39;root&#39;@&#39;host.docker.internal&#39; IDENTIFIED BY &#39;&#39;; # GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;host.docker.internal&#39;; # FLUSH PRIVILEGES; DB_HOST: 192.168.0.1 DB_DATABASE: yii3_i DB_USER: root DB_PASSWORD: root db: image: mysql:8.0 restart: always environment: MYSQL_ROOT_PASSWORD: root MYSQL_DATABASE: yii3_i # Пользователь ниже необязателен; Для локальной разработки достаточно root MYSQL_USER: root MYSQL_PASSWORD: ports: - &quot;33060:3306&quot; # Необязательно: откройте доступ, если хотите подключиться с хоста volumes: - db_data:/var/lib/mysql volumes: db_data:</pre><pre> <b>C:\wamp\www\invoice\docker\dev\php\Dockerfile</b>
      FROM php:8.3-fpm-alpine

# Установка системных зависимостей и инструментов сборки PHP
RUN apk add --no-cache \
      acl \
      fcgi \
      файл \
      получить текст
      git \
      нано
      curl \
      libjpeg-turbo-dev \
      libpng-dev \
      libwebp-dev \
      freetype-dev
      icu-dev \
      libzip-dev \
      zlib-dev
      gd-dev \
      oniguruma-dev
      postgresql-dev
      rabbitmq-c-dev
      $PHPIZE_DEPS

# Установите и включите расширение PECL (amqp)
RUN pecl install amqp-1.11.0 \
    &amp;&amp; docker-php-ext-enable amqp

# Очистка зависимостей сборки и кэша PEAR для уменьшения размера образа
ЗАПУСК apk del --purge $PHPIZE_DEPS \
    &amp;&amp; pecl clear-cache \
    &amp;&amp; rm -rf /tmp/pear \
    &amp;&amp; docker-php-source delete \
    &amp;&amp; rm -rf /var/cache/apk/*

# Настройка Композитора
COPY --from=composer:2 /usr/bin/composer /usr/bin/composer
ENV COMPOSER_ALLOW_SUPERUSER=1
ENV PATH=&quot;${PATH}:/root/.composer/vendor/bin&quot;

# Использовать файл php.ini для разработки в качестве файла по умолчанию
RUN ln -sf $PHP_INI_DIR/php.ini-development $PHP_INI_DIR/php.ini

# Установка рабочего каталога
WORKDIR /app

# Скопируйте файлы конфигурации (удалите, если они не нужны)
COPY docker/dev/php/conf.d/ $PHP_INI_DIR/conf.d/
COPY docker/dev/php/php-fpm.d/ /usr/local/etc/php-fpm.d/

# Скопируйте и установите зависимости PHP
COPY composer.json composer.lock* ./
RUN composer install --no-plugins --no-scripts --prefer-dist &amp;&amp; composer clear-cache

# Скопируйте остальную часть кода вашего приложения
КОПИЯ ./ ./

# Запуск скриптов после установки
RUN composer run-script post-install-cmd

# Проверка состояния здоровья для FPM
HEALTHCHECK --interval=30s --timeout=5s --start-period=1s \
  CMD REQUEST_METHOD=GET SCRIPT_NAME=/ping SCRIPT_FILENAME=/ping cgi-fcgi -bind -connect 127.0.0.1:9000

# Права доступа и команда точки входа
Выполните команду `run chmod 0555 ./docker/docker-entrypoint.sh`.
ТОЧКА ВХОДА [&quot;docker/docker-entrypoint.sh&quot;]
CMD [&quot;php-fpm&quot;]
  </pre></p><p><b>13 июня 2025 г.</b></p><p> Эгида:</p><p> Наиболее активно поддерживаемая MFA</p><P> HTML-код для текстового поля, указывающий длину строки</p><p> 9-значная клавиатура на PHP</p><p> Добавление дополнительного разрешения к промежуточному программному обеспечению:</p><p> Рекомендации по использованию одноразовых паролей (OTP)</p><p> <b>12 июня 2025 г.</b></p><p> Я не использую Telegram для одноразовых паролей.</p><p> Двухфакторная аутентификация с помощью приложения Aegis Authenticator для Android работает.</p><p> Включите двухфакторную аутентификацию в разделе «Настройки... Просмотр... Двухфакторная аутентификация».</p><p> При таких настройках доступны два варианта:</p><p> Вариант 1: С отключением: то есть всегда показывать QR-код. Двухфакторная аутентификация в настоящее время включена для дополнительной безопасности и отключается после успешной аутентификации для обеспечения дополнительного уровня защиты до следующего входа в систему. QR-код будет отображаться каждый раз после входа в систему для ввода нового секретного ключа.</p><p> Вариант 2: Без отключения: то есть QR-код будет отображаться только один раз во время настройки. Двухфакторная аутентификация в настоящее время включена для дополнительной безопасности и не отключается после успешной аутентификации. QR-код не будет отображаться каждый раз после входа в систему после настройки.</p><p> При запуске TFa создается новое разрешение noEntryToBaseController. Это предотвращает доступ к BaseController.</p><p> Как только TFa завершится, будет создан новый объект разрешения entryToBaseController. Он останется активным до выхода из системы.</p><p> Вход в систему также инициализирует эти разрешения. См. функции tfaNotEnabledUnblockBaseController и tfaIsEnabledBlockBaseController.</p><p> Далее: Внедрение и тестирование Docker.</p><p> <b>29 мая 2025 г.</b></p><p> Подготовка к аутентификации TOTP с использованием AegisAuthenticator</p><p> Я постараюсь следовать рекомендациям Copilot, изложенным на https://github.com/rossaddison/invoice/discussions/219</p><p> https://github.com/beemdevelopment/Aegis</p><p> <b>23 мая 2025 г.</b></p><p> Внедрение цифровой системы налогообложения в Великобритании станет обязательным с апреля 2026 года.</p><p> 1. Проверка работоспособности API заголовков предотвращения мошенничества.<p><p> 1a. Шаг 1: Настройки ... Вид ... Вкладка «Цифровое налогообложение» ... Сгенерировать. Это приложение использует метод подключения WEB_APP_VIA_SERVER.</p><p> Необходимо сгенерировать примерно 13 заголовочных файлов: действие &#39;setting/fphGenerate&#39; и файл rebuild/js/settings.js.</p><p>1b. Шаг 2. Отчеты... Тестирование API заголовков предотвращения мошенничества.</p><p> 2. Файл HmrcController.php создан в папке бэкэнда и будет включать в себя другие реализации API.</p><p> 3. https://developer.service.hmrc.gov.uk/guides/fraud-prevention/connection-method/web-app-via-server<p> <b>26 апреля 2025 г.</b></p><p> Проведено повторное тестирование oauth2 с использованием rossaddison/yii-auth-client и добавлен oauth2 для gov.uk, который ранее не тестировался.</p><p> <b>16 апреля 2025 г.</b></p><p> Удалены всплывающие сообщения из BaseController и messages\en\app.php</p><p> В настройках добавлена ​​новая функция: модальное PDF-окно для выставления счетов.</p><p> <b>10 апреля 2025 г.</b></p><p> В корневую папку был добавлен следующий файл m.bat.</p><p><pre> @echo выключено
:: Этот пакетный скрипт предоставляет меню для выполнения распространенных команд проекта «Система выставления счетов».
:: Это позволяет пользователям запускать PHP Psalm, проверять наличие устаревших зависимостей Composer, 
:: и запустите Composer Require Checker, всё из той же директории, где находится скрипт.
:: Благодарность: Второй пилот

Заголовок меню команд системы выставления счетов
cd /d &quot;%~dp0&quot;

:меню
кл
echo =======================================
меню системы выставления счетов
echo =======================================
echo [1] Run PHP Psalm
echo [2] Check Composer Outdate
echo [3] Run Composer Require Checker
echo [4] Выход
echo =======================================
set /p choice=&quot;Введите ваш выбор [1-4]: &quot;

если &quot;%choice%&quot;==&quot;1&quot; перейти к псалму
если &quot;%choice%&quot;==&quot;2&quot; перейти к устаревшему
if &quot;%choice%&quot;==&quot;3&quot; goto require_checker
если &quot;%choice%&quot;==&quot;4&quot; перейти к выходу
echo Неверный выбор. Пожалуйста, попробуйте еще раз.
пауза
перейти в меню

:псалом
echo Запуск PHP Псалма...
php vendor/bin/psalm
пауза
перейти в меню

:устаревший
echo Проверка устаревшего редактора...
композитор устарел
пауза
перейти в меню

:require_checker
echo Running Composer Require Checker...
php vendor/bin/composer-require-checker
пауза
перейти в меню

:Выход
echo Выход. До свидания!
пауза
Выход
</pre></p><p>Для контроллеров InvController, SalesOrderController и QuoteController добавлен базовый контроллер (BaseController).</p><p> Кнопки в меню inv/index отключаются с помощью следующей комбинации:<pre> &#39;disabled&#39; =&gt; &#39;disabled&#39;, &#39;aria-disabled&#39; =&gt; &#39;true&#39;, &#39;style&#39; =&gt; &#39;pointer-events:none&#39;</pre></p><p> <b>7 апреля 2025 г.</b></p><p> DependencyDropdown создан для Family Search</p><p> Введен фильтр семейства индексов товаров.</p><p> Поиск по семейству товаров (2-й уровень) в дальнейшем будет расширен и будет включать поиск по товарам (3-й уровень).</p><p> <b>4 апреля 2025 г.</b></p><p> Выпадающее подменю для получения подробной информации о PHP находится в файле resources\views\layout\invoice.php.</p><p> Используйте DropdownItem::text($subMenu-&gt;generate($translator-&gt;translate(&#39;faq.php.info.details&#39;),$urlGenerator, $subMenuPhpInfo)), чтобы создать выпадающее подменю. src\Widget\SubMenu компилируется из массива, указанного в макете.</p><p> <b>3 апреля 2025 г.</b></p><p> Добавьте классы CategoryPrimary и CategorySecondary в рамках подготовки к выпадающему списку зависимостей. Они еще не включены в меню. Psalm: Вставьте класс Final во все классы, кроме классов сущностей, поскольку они должны быть нефинальными, так как они расширяются прокси Cycle/ORM для создания прокси. Удалите &#39;Invalid Argument&#39; из psalm, поскольку все ошибки исправлены. Совет по решению сложных ошибок psalm: обратитесь в Copilot онлайн, открыв репозиторий на определенной странице: введите номер строки: Ошибка Psalm, нажмите Enter. Примените предложенное решение. Запустите команду &#39;php vendor/bin/psalter --issues=MissingOverrideAttribute&#39; в командной строке, чтобы автоматически установить атрибут #Override. См. https://psalm.dev/docs/running_psalm/issues/MissingOverrideAttribute/ psalm-suppress 16 ошибок NonInvariantDocblockPropertyType, связанных с Assets $js и $css. Обновите файлы \invoice\resources\views\invoice\generator\templates_protected после создания классов и представлений CategoryPrimary и CategorySecondary с помощью генератора. Улучшения генератора будут достигнуты по мере его использования.</p><p> <b>30 марта 2025 г.</b></p><p> Проверка кодирования представлений в формате HTML</p><p> <b>26 марта 2025 г.</b></p><p> Из SettingRepository был удален интерфейс сессии, поскольку консольные команды, использующие SettingRepository, не используют сессию.</p><p> В формах для клиентов отображаются только красные напоминания о необходимости заполнения полей. Поля, не требующие заполнения, удалены. Это ускорит процесс регистрации клиентов.</p><p> Количество обязательных полей в форме клиента было сокращено для уменьшения объема вводимых данных.</p><p> В консоли можно использовать следующие команды (config/console/commands.php и src/Command/Invoice):</p><p> Команда `yii invoice/items` создает список случайных позиций счета-фактуры с таблицей сводных данных по налогу на позиции и двум налогам, специфичным для каждого счета-фактуры: 15% и 20%.</p><p> yii invoice/setting/truncate -- удаляет все настройки из таблицы настроек -- В будущем в InvoiceController можно будет передавать массив, который можно будет изменять в файле config/common/params.</p><p> yii invoice/generator/truncate — удаляет все записи в таблицах gentor и gentor relation — Используйте генератор для создания CRUD-операций для чего-то другого.</p><p>yii invoice/inv/truncate1 -- удаляет все счета-фактуры и связанные с ними таблицы -- для тестирования в процессе разработки</p><p> yii invoice/quote/truncate2 — удаляет все коммерческие предложения и связанные с ними таблицы — для тестирования в процессе разработки.</p><p> yii invoice/salesorder/truncate3 -- удаляет все таблицы заказов на продажу и связанные с ними таблицы для тестирования в процессе разработки.</p><p> yii invoice/nonuserrelated/truncate4 -- удаляет все последующие таблицы, кроме таблиц, отвечающих за вход в систему.</p><p> Консольные команды, у которых после слова truncate стоит число, указывают на общую последовательность действий во избежание нарушений ограничений целостности.</p><p> Общее эмпирическое правило для предотвращения нарушений ограничений целостности: если таблица содержит внешний ключ, например, tax_rate_id, то таблица TaxRate будет очищена позже.</p><p> Примените хеширование из https://github.com/yiisoft/router/pull/262/files для преобразования URL-адресов в хлебные крошки для быстрого доступа к настройкам.</p><p> Исправлена ​​ошибка печати PDF-документов на языке клиента. Для печати документов будет использоваться язык по умолчанию, если клиент не указал другой язык.</p><p> Установите локаль, когда представление отображается частично, то есть без использования макета.<pre> $translator-&gt;setLocale($cldr);</pre></p><p> Включите несколько функциональных тестов с<pre> php vendor/bin/codecept run</pre></p><p> <b>23 марта 2025 г.</b></p><p><pre>

c:\wamp128\www\invoice&gt;yii invoice/items

+------------+-----------------+----------+------------+-----------------+------------+------------+----------------+------------+------------+------------+
| Название | Описание | Количество | Цена за единицу | (Скидка за единицу) | Итого | (Скидка) | После скидки | Налог (%) | Налог | Всего |
+------------+-----------------+----------+------------+-----------------+------------+------------+----------------+------------+------------+------------+
| Мышь | 3-кнопочная | 4 | 1.00 | 1.00 | 4.00 | 4.00 | 0.00 | 20.00 | 0.00 | 0.00 |
+------------+-----------------+----------+------------+-----------------+------------+------------+----------------+------------+------------+------------+
| Клавиатура | США | 2 | 4.00 | 1.00 | 8.00 | 2.00 | 6.00 | 20.00 | 1.20 | 7.20 |
+------------+-----------------+----------+------------+-----------------+------------+------------+----------------+------------+------------+------------+
| Экран | 24 дюйма x 16 дюймов | 1 | 3.00 | 1.00 | 3.00 | 1.00 | 2.00 | 15.00 | 0.30 | 2.30 |
+------------+-----------------+----------+------------+-----------------+------------+------------+----------------+------------+------------+------------+
| Жесткий диск | 1 ТБ | 2 | 3.00 | 1.00 | 6.00 | 2.00 | 4.00 | 15.00 | 0.60 | 4.60 |
+------------+-----------------+----------+------------+-----------------+------------+------------+----------------+------------+------------+------------+
| Коробка | Стандарт | 1 | 3.00 | 1.00 | 3.00 | 1.00 | 2.00 | 15.00 | 0.30 | 2.30 |
+------------+-----------------+----------+------------+-----------------+------------+------------+----------------+------------+------------+------------+
| | | | | | | | 14.00 | | 2.40 | 16.40 |
+------------+-----------------+----------+------------+-----------------+------------+------------+----------------+------------+------------+------------+
+----------------------------------------------------+------------+
| После скидки на товар | 14.00 |
| Добавить: Налог на товар | Итого | 2.40 |
+----------------------------------------------------+------------+
| С учетом налога на товар | 16.40 |
| Налоги по счету-фактуре (15% 2,46, 20% 3,28) | 5,74 |
+----------------------------------------------------+------------+
| Итого до скидки по счету | 22,14 |
| (Скидка по счету составляет 10% от общей суммы до скидки) | 2.21 |
+----------------------------------------------------+------------+
| Всего | 19,93 |
+----------------------------------------------------+------------+
</pre></p><p><pre>
  C:\wamp128\www\invoice&gt;php vendor/bin/codecept run Codeception 5.2.1 Использование: команда [параметры] [аргументы] Параметры: -h, --help Отобразить справку по заданной команде. Если команда не указана, отобразить справку по команде list. -q, --quiet Не выводить никаких сообщений. -V, --version Отобразить версию этого приложения. --ansi|--no-ansi Принудительно (или отключить --no-ansi) вывод ANSI. -n, --no-interaction Не задавать интерактивных вопросов. -c, --config[=CONFIG] Использовать пользовательский путь для конфигурации. -v|vv|vvv, --verbose Увеличить уровень детализации сообщений: 1 для обычного вывода, 2 для более подробного вывода и 3 для отладки. Доступные команды: bootstrap Создает тестовые наборы по умолчанию и генерирует все необходимые файлы. build Генерирует базовые классы для всех наборов. clean Рекурсивно очищает журнал и сгенерированный код. completion Выводит скрипт автодополнения оболочки. console Запускает интерактивную тестовую консоль. dry-run Выводит пошаговый тест, управляемый сценарием, или справку по функциям. Отобразить справку по команде. init Создает тестовые наборы по шаблону. list Выводит список команд. run Запускает тестовые наборы. config config:validate Проверяет и выводит конфигурацию на экран. generate generate:cest Генерирует пустой файл Cest в наборе тестов. generate:environment Генерирует пустой файл конфигурации среды. generate:feature Генерирует пустой файл функций в наборе тестов. generate:groupobject Генерирует подписчика группы. generate:helper Генерирует новый вспомогательный класс. generate:pageobject Генерирует пустой класс PageObject. generate:scenarios Генерирует текстовое представление для всех сценариев. generate:snapshot Генерирует пустой класс Snapshot. generate:stepobject Генерирует пустой класс StepObject. generate:suite Генерирует новый набор тестов. generate:test Генерирует пустой файл модульных тестов в наборе тестов. gherkin gherkin:snippets Извлекает пустые шаги из файлов функций набора тестов и выводит для них фрагменты кода. gherkin:steps Выводит все определенные шаги функций.</pre></p><p> <b>9 марта 2025 г.</b></p><p> Замените jQuery datepicker на Bootstrap datepicker из-за постоянных уязвимостей безопасности в jQuery datepicker. Удалите гибкие форматы даты, например Field::text, и замените их на Field::date, или в HTML временно удалите гибкий формат даты в разделе «Настройки ... Представления ... Общие ... Формат даты», с возможностью его повторного введения позже. Файлы JavaScript основаны на jQuery, то есть базовый синтаксис: $(selector).action(), поэтому сохраните jQuery.</p><p> <b>8 марта 2025 г.</b></p><p> Добавьте CSS-стили для хлебных крошек в файле invoice/inv/index.php, предоставленные OpenCart, в файл src\Invoice\Asset\invoice\css\style.css</p><p> В настройках Bootstrap5 можно настроить шрифт и размер всплывающего сообщения, а также размер шрифта кнопки закрытия.</p><p> Codecov был представлен как отдельный рабочий процесс.</p><p> <b>5 марта 2025 г.</b></p><p> Внесите изменения, нарушающие совместимость с последней версией yiisoft/router 4, в файл config/common/di/router.php (https://github.com/yiisoft/router/pull/207)</p><p> c:\wamp64\www\invoice&gt;php vendor/bin/codecept run</p><p> Добавлено несколько дополнительных форков, которые будут позже заменены обновленными файлами composer.json: &quot;rossaddison/yii-cycle-1&quot;: &quot;&gt;=1&quot;, &quot;rossaddison/yii-gii&quot;: &quot;dev-master&quot;, &quot;rossaddison/yii-middleware&quot;: &quot;dev-master&quot;,</p><p> Скомпилировал первый этап приемочных тестов Codeception, аналогичный yiisoft/demo, в командной строке.</p><p> Используйте сообщения об ошибках yiisoft/validator в приемочном тестировании, добавив новый псевдоним &#39;@validatorCategory&#39; в файл config\common\di\translator.php.</p><p> <b>3 марта 2025 г.</b></p><p> Макеты модальных окон скорректированы таким образом, чтобы исключить использование атрибута &#39;aria-hidden&#39;. В рефакторизованном файле yi-bootstrap/Modal обнаружены проблемы с атрибутом &#39;aria-hidden&#39;, и он не используется, поскольку в Chrome его необходимо подавлять с помощью атрибута &#39;inert&#39; через JavaScript. Например, в файле modal_layout_yii_bs.php</p><p> Счета-фактуры, помеченные как отправленные и отображающиеся у клиента, можно вернуть в черновик при условии, что параметр &#39;disable_read_only&#39; установлен на 1.</p><p> <b>22 февраля 2025 г.</b></p><p> Вкладка «Настройки Bootstrap5» представлена ​​в файле tab_index.php и содержит параметры Offcanvas: начало (слева), конец (справа), верх, низ.</p><p> Bootstrap5 Offcanvas функциональный</p><p> <b>19 февраля 2025 г.</b></p><p> Функциональная версия Google Translate 2.</p><p> Новая функция GeneratorController rebuildLocale() сравнивает исходный файл resources/messages/en/app.php с уже созданным файлом {locale}/app.php. В папке src/Invoice/Language/English создается файл diff_lang.php, ключи которого используются для создания переведенного файла с метками времени в папке resources/views/invoice/generator/output_overwrite. Если файл diff_lang.php слишком велик для перевода Google, генерируется исключение.</p><p>В файл psalm.xml добавлено несколько дополнительных операторов подавления псалмов, которые будут исправлены в ближайшее время.</p><p><pre>
     Обновление версии psalm до 6.6.0 выполнено 16.02.2025.
     Эту проблему необходимо решить с помощью cycle/orm, который отправляет сообщения об ошибках классам, которые становятся final.
     ClassMustBeFinal<br>
     
     Реализовано 16.02.2025 new ActionButton(url: ...unable to psalm-suppress named parameters.
     InvalidArgument<br>

     Обновление до версии psalm 6.7.1 выполнено 17.02.2025.
     MissingOverrideAttribute<br>        
</pre></p><p><b>10 февраля 2025 г.</b></p><p> Функция проверки удалена с возможностью повторной реализации.</p><p> Ветки обновлены с помощью коммитов.</p><p> Создана ветка Google Cloud Translate версии 2 — начата работа.</p><p> Кнопки действия (ActionButtons) реализованы во всех столбцах действий (ActionColumns).</p><p><pre> C:\wamp128\www\invoice&gt;composer устарел
Цветовая легенда:
- Доступен патч или небольшое обновление - Рекомендуется обновление
- Доступен основной релиз - Возможно обновление

Необходимые прямые зависимости указаны в файле composer.json:
cycle/annotated 3.5.0 4.2.3 Генератор аннотированных сущностей Cycle ORM
google/cloud-translate 1.21.0 2.0.0 Клиент облачного перевода для PHP
phpbench/phpbench 1.2.15 1.4.0 PHP Benchmarking Framework
phpunit/phpunit 11.5.7 12.0.2 Фреймворк для модульного тестирования PHP.
spatie/phpunit-watcher 1.23.6 1.24.0 Автоматический перезапуск тестов PHPUnit при изменении исходного кода
symfony/console 6.4.17 7.2.1 Упрощает создание красивых и тестируемых интерфейсов командной строки
yiisoft/error-handler 3.3.0 4.0.0 Библиотека обработки ошибок Yii
zircote/swagger-php 4.11.1 5.0.3 swagger-php - Генерация интерактивной документации для вашего RESTful API...

Транзитивные зависимости не требуются в composer.json:
jolicode/jolinotif 2.7.3 3.0.0 Отправка уведомлений на рабочий стол в Windows, Linux, MacOS.
jolicode/php-os-helper 0.1.0 0.2.0 Вспомогательные функции для определения операционной системы машины, на которой запущен PHP.
justinrainbow/json-schema 5.3.0 6.1.0 Библиотека для проверки JSON-схемы.
netresearch/jsonmapper 4.5.0 5.0.0 Сопоставление вложенных JSON-структур с PHP-классами
php-http/message-factory 1.1.0 1.1.0 Фабричные интерфейсы для HTTP-сообщений PSR-7
Пакет php-http/message-factory заброшен, его следует избегать. Вместо него используйте psr/http-factory.
phpbench/dom 0.3.3 0.3.3 Оболочка DOM для упрощения работы с реализацией DOM в PHP
Пакет phpbench/dom заброшен, его использование не рекомендуется. Замена не предложена.
phpunit/php-code-coverage 11.0.8 12.0.2 Библиотека, предоставляющая функциональные возможности для сбора, обработки и отображения кода...
phpunit/php-file-iterator 5.1.0 6.0.0 Реализация FilterIterator, которая фильтрует файлы на основе списка suff...
phpunit/php-invoker 5.0.1 6.0.0 Вызов вызываемых функций с таймаутом
phpunit/php-text-template 4.0.1 5.0.0 Простой шаблонизатор.
phpunit/php-timer 7.0.1 8.0.0 Вспомогательный класс для измерения времени выполнения.
sebastian/cli-parser 3.0.2 4.0.0 Библиотека для анализа параметров командной строки
sebastian/comparator 6.3.0 7.0.0 Предоставляет функциональность для сравнения значений PHP на равенство
sebastian/complexity 4.0.1 5.0.0 Библиотека для расчета сложности единиц кода PHP
sebastian/diff 6.0.2 7.0.0 Реализация Diff
sebastian/environment 7.2.0 8.0.0 Предоставляет функциональность для работы с средами HHVM/PHP
sebastian/exporter 6.3.0 7.0.0 Предоставляет функциональность для экспорта переменных PHP для визуализации.
sebastian/global-state 7.0.2 8.0.0 Создание снимков глобального состояния
sebastian/lines-of-code 3.0.1 4.0.0 Библиотека для подсчета строк кода в исходном коде PHP
sebastian/object-enumerator 6.0.1 7.0.0 Проходит по структурам массивов и графам объектов для перечисления всех ссылочных элементов...
sebastian/object-reflector 4.0.1 5.0.0 Позволяет отражать атрибуты объектов, включая унаследованные и непубличные...
sebastian/recursion-context 6.0.2 7.0.0 Предоставляет функциональность для рекурсивной обработки переменных PHP
sebastian/type 5.1.0 6.0.0 Коллекция объектов-значений, представляющих типы системы типов PHP.
sebastian/version 5.0.2 6.0.0 Библиотека, помогающая управлять номером версии PHP-приложений, размещенных на Git...
sentry/sdk 3.6.0 4.0.0 Это метапакет, содержащий sentry/sentry с рекомендуемым HTTP-клиентом...
sentry/sentry 3.22.1 4.10.0 PHP SDK для Sentry (http://sentry.io)
symfony/config 6.4.14 7.2.3 Помогает находить, загружать, комбинировать, автоматически заполнять и проверять значения конфигурации...
symfony/dependency-injection 6.4.16 7.2.3 Позволяет стандартизировать и централизовать способ создания объектов...
symfony/finder 5.4.45 7.2.2 Находит файлы и каталоги с помощью интуитивно понятного и удобного интерфейса.
symfony/framework-bundle 6.4.18 7.2.3 Обеспечивает тесную интеграцию между компонентами Symfony и Symfony...
symfony/http-kernel          6.4.18 7.2.3 Предоставляет структурированный процесс преобразования запроса в ответ symfony/process 6.4.15 7.2.0 Выполняет команды в дочерних процессах symfony/yaml 6.4.18 7.2.3 Загружает и выгружает YAML-файлы</pre></p><p> <b>8 февраля 2025 г.</b></p><p> 1. Включите функцию blockInvalidState во все клиенты обратного вызова AuthController, которая проверяет наличие CSRF-атак.</p><p> и нулевое состояние аутентификации сессии. Copilot задали вопрос по этому поводу, однако репозиторий yii-auth-client</p><p> Состояние уже сохраняется во время выполнения функции yii-auth-client oauth2 buildAuthUrl как &#39;authState&#39;.</p><p> Это значение сравнивается со значением состояния, возвращаемым поставщиком идентификации, и если оно сравнивается, то...</p><p> Если они не одинаковы, то, вероятно, имеет место CSRF-атака. Эта потенциальная возможность также была учтена.</p><p> Поскольку функция AuthClient getState является смешанной и может возвращать как строковое значение, так и значение null, существует вероятность её возврата.</p><p> 2. Добавьте параметр idle_timeout в файл composer.json, как предложил Scrutinizer.</p><p> 3a. Примените yiisoft/demo/pull/636 «Настройка структуры Mailer в контроллерах».</p><p> 3b. Добавьте тему Bootstrap5 по умолчанию в файл config/web/params.php.</p><p> <b>1 февраля 2025 г.</b></p><p> Политика конфиденциальности и условия предоставления услуг были введены в рамках подготовки к запуску TikTok OAuth2.0.</p><p> В версии vimeo/psalm 6.1 исправлено 186 ошибок, в основном связанных с PossiblyFalseArgument.</p><p> layout\invoice.php ieВнутреннее меню для не-гостей разделено на отладочную и производственную версии. Измените значение YII_DEBUG=true в файле .env в корневой директории.</p><pre>
C:\wamp128\www\invoice&gt;php ./vendor/bin/psalm

JIT-ускорение: ВЫКЛ. (отключено в Windows и PHP &lt; 8.4)
Установите PHP 8.4+, чтобы использовать JIT-компиляцию в Windows и получить прирост производительности более чем на 20%!

Целевая версия PHP: 8.3 (определена по composer.json) Включенные расширения: dom (неподдерживаемые расширения: fileinfo, pdo_sqlite, uopz).

Сканирование файлов...

1576 / 1576...

Анализ файлов...
------------------------------

       Ошибок не обнаружено!

------------------------------
<br>
C:\wamp128\www\invoice&gt;composer устарел
Цветовая легенда:
- Доступен патч или небольшое обновление - Рекомендуется обновление
- Доступен основной релиз - Возможно обновление
<br>
Необходимые прямые зависимости указаны в файле composer.json:
cycle/annotated 3.5.0 4.2.3 Генератор аннотированных сущностей Cycle ORM
phpbench/phpbench 1.2.15 1.4.0 PHP Benchmarking Framework
phpunit/phpunit 10.5.44 11.5.6 Фреймворк для модульного тестирования PHP.
spatie/phpunit-watcher 1.23.6 1.24.0 Автоматический перезапуск тестов PHPUnit при изменении исходного кода
symfony/console 6.4.17 7.2.1 Упрощает создание красивых и тестируемых интерфейсов командной строки
zircote/swagger-php 4.11.1 5.0.3 swagger-php - Генерация интерактивной документации для вашего RESTful-приложения...
<br>
C:\wamp128\www\invoice&gt;composer why-not cycle/annotated 4.2.3
rossaddison/invoice - требует cycle/annotated (^3.5)
yiisoft/yii-cycle 2.0.x-dev требует cycle/annotated (^3.5)
Не нашли то, что искали? Попробуйте вызвать `composer require &quot;cycle/annotated:4.2.3&quot; --dry-run`, чтобы получить другое представление о проблеме.
<br>
C:\wamp128\www\invoice&gt;composer why-not zircote/swagger-php 5.0.3
rossaddison/invoice - требует zircote/swagger-php (^4.0)
Для работы yiisoft/yii-debug-api 3.0.x-dev требуется zircote/swagger-php (^4.0)
Не нашли то, что искали? Попробуйте вызвать `composer require &quot;zircote/swagger-php:5.0.3&quot; --dry-run`, чтобы получить другое представление о проблеме.

</pre><p><b>23 января 2025 г.</b></p><p> Введен код авторизации VKontakte OAuth2.0.</p><p> <b>19 января 2025 г.</b></p><p> Введен код авторизации LinkedIn OAuth2.0.</p><p> <b>18 января 2025 г.</b></p><p> Введена авторизация с использованием кода авторизации Yandex Oauth2.0 и PKCE.</p><p> Использован метод проверки кода S256.</p><p> В Twitter были внесены изменения, теперь вместо обычного кода используется метод проверки кода S256.</p><p> <b>15 января 2025 г.</b></p><p> X, то есть код авторизации Twitter OAuth2.0 с публичным клиентом PKCE (не конфиденциальным клиентом), который работает. Конфиденциальный клиент будет представлен позже.</p><p> <b>9 января 2025 г.</b></p><p> MicrosoftOnline Oauth2 функциональный</p><p> <b>31 декабря 2024 г.</b></p><p> Функциональность Google OAuth2.</p><p> Улучшите порядок параметров в функциях AuthController и добавьте функцию callbackGoogle в контроллер.</p><pre> Файл ..resources/rbac/assignments.php был преобразован в пустой массив для возможности регистрации. Если у вас возникнут трудности, формат будет следующим:
    возвращаться [
        1 =&gt; [
            &#39;user_id&#39; =&gt; &#39;1&#39;,
            &#39;item_name&#39; =&gt; &#39;admin&#39;,
        ],
        2 =&gt; [
            &#39;user_id&#39; =&gt; &#39;2&#39;,
            &#39;item_name&#39; =&gt; &#39;observer&#39;,
        ],
    ]; 
</pre><p>Next LinkedIn Oauth2</p><p> <b>27 декабря 2024 г.</b></p><p> Функция Facebook OAuth2 работает.</p><p> src\Auth\Controller\AuthController<pre> function getAuthTokenType($identityProvider)</pre> Отображает тип токена для каждого поставщика идентификации, например, &#39;facebook&#39; =&gt; &#39;access-token&#39;, &#39;email&#39; =&gt; &#39;email-verification&#39;.</p><p> и см. функцию UserInvController signup RouteArgument $tokenType</p><p> <b>25 декабря 2024 г.</b></p><p> Функция Github Oauth2 работает. Пользователь Github автоматически проходит аутентификацию, регистрируется и получает клиентское приложение без раскрытия паролей.</p><p> Создана новая функция oAuthService oauthLogin, которая не требует пароля, поскольку аутентификация уже обеспечивается Github.</p><p> Вкратце, пользователя можно найти по его логину, то есть по имени пользователя и коду.<pre>
    Auth\AuthService
    
    public function oauthLogin(string $login): bool
    {
        $user = $this-&gt;userRepository-&gt;findByLoginWithAuthIdentity($login);
        
        if ($user === null) {
            вернуть false;
        }

        return $this-&gt;currentUser-&gt;login($user-&gt;getIdentity());
    }
</pre>Используя идентификатор пользователя, текущий пользователь входит в систему.</p><p> <b>Шаг 1.</b> Когда пользователь выбирает «Продолжить на Github», Github возвращает токен доступа, используя<pre> $oAuthTokenType = $this-&gt;github-&gt;fetchAccessToken($request, $code, $params = [])</pre> И мы используем этот токен в заголовке запроса, чтобы получить информацию от пользователя с помощью клиента Github из форка rossaddison/yii-auth-client.<pre> $this-&gt;github-&gt;getCurrentUserJsonArray($oAuthTokenType);</pre> Функция auth/callbackGithub объединяет данные пользователя с помощью:</p><pre> $login = &#39;github&#39;.(string)$githubId.$githubLogin;</pre><p> а. &#39;github&#39; ... чтобы отличить его от других поставщиков идентификационных данных.</p><p> б. Идентификатор Github, который является целым числом и, естественно, уникален.</p><p> c. и логин или имя пользователя Github, которое, возможно, не является уникальным и могло быть использовано пользователем более одного раза при регистрации у других поставщиков идентификационных данных, например, LinkedIn.</p><p> <b>Шаг 2.</b> Создается случайный строковый пароль, который никогда не будет использован, и он хешируется.</p><p> <b>Шаг 3.</b> Служба аутентификации пытается выполнить «первый вход в систему» ​​с использованием этого «логина» и деактивирует токен часа... в противном случае создается новый пользователь и имя пользователя, направляя его на вход через своего поставщика идентификации.</p><p> <b>Шаг 4.</b> Пользователь должен нажать на кнопку «Пожалуйста, нажмите здесь в течение следующего часа, чтобы активировать», чтобы избежать истечения срока действия нашего «Токена доступа Github».<p> Подобно токену подтверждения электронной почты, наш токен доступа к Github устанавливается на 3600 секунд или час, что позволяет пользователю активировать приложение и войти в систему в течение этого часа, и не имеет отношения к токену доступа к Github, полученному от Github на шаге 1.</p><p> <b>20 декабря 2024 г.</b></p><p> Введение OAuth2 и трейта FlashMessage</p><p> Вкладка «Настройки OAuth2» позволяет включить/исключить кнопки «Продолжить» для Github, Facebook и Google как в формах входа, так и в формах регистрации.</p><p> <b>18 декабря 2024 г.</b></p><p> Создание OAuth-приложения с использованием Github для получения идентификатора клиента Github и секретного ключа клиента, чтобы пользователи могли входить на ваш сайт, используя свои учетные данные Github.</p><p> <b>Шаг 1.</b> <a href="https://docs.github.com/v3/oauth">Ознакомьтесь с документацией.</a><p> <b>Шаг 2.</b> <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1">Реализация OAuth в GitHub поддерживает стандартный тип предоставления кода авторизации.</a><p> <b>Шаг 3.</b> <a href="https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/authorizing-oauth-apps#web-application-flow">Мы используем алгоритм работы веб-приложения.</a><p> <b>Шаг 4.</b> <a href="https://github.com/settings/applications/new">Зарегистрируйте свою заявку.</a></p><p> <b>Шаг 5a.</b> Запрос веб-идентификатора пользователя с помощью<pre> GET https://github.com/login/oauth/authorize</pre> и<pre> параметры запроса: client_id, redirect_url, state, login</pre></p><p> <b>Шаг 5b.</b> Пользователи перенаправляются обратно на ваш сайт с временным кодом. Обменяйте этот код на токен доступа, используя конечную точку.<pre> POST https://github.com/login/oauth/access_token</pre> с параметрами client_id, client_secret, code, redirect_url, например, токена доступа.<pre> access_token=gho_16C7e42F292c6912E7710c838347Ae178B4a&amp;scope=repo%2Cgist&amp;token_type=bearer</pre> и если принимаются заголовки, используемые в формате JSON или XML.</p><p> <b>Шаг 5c.</b> Функция callbackGithub в файле src/Auth/Controller/AuthController.php, <s>использующая класс Middleware Authentication</s> , получает параметры запроса code и state от Github.</p><p> <b>Шаг 5d.</b> Если код не равен ошибке 401 (несанкционированный доступ) и параметр состояния не пуст, получите токен.<pre> функция OAuth2-&gt;fetchAccessToken</pre> .<p> <b>Шаг 5e.</b> Если получен официальный токен, используйте токен доступа для доступа к API от имени пользователя.<pre> Авторизация: OAUTH-TOKEN (Предъявитель)<br>
GET https://api.github.com/user</pre><p><p> <b>Шаг 5f.</b> Используйте функцию `getCurrentUserJsonArray(OAuthToken $token)` из файла `vendor/rossaddison/yii-auth-client/src/Client/Github.php`, чтобы использовать встроенный тип OAuthToken с параметром `access-token`, специфичным для Github, для доступа к данным пользователя, например, к логину (базовый репозиторий) и идентификатору.</p><p><b>18 декабря 2024 г.</p><p> Bootstrap 5 - Применить рефакторинг выпадающего виджета</p><p> <b>11 декабря 2024 г.</b></p><p> Приготовьтесь протестировать Google с помощью возвращаемых URL-адресов, которые еще не настроены.</p><p> Примените рефакторинг пагинации из yiisoft/yii-dataview/pull/228 к большинству индексов.</p><p> <b>3 декабря 2024 г.</b></p><p> Добавьте вкладку «Главная страница» в настройках, где можно установить флажки для каждой из основных страниц, чтобы их можно было включать/исключать из сайта.</p><p> <b>24 ноября 2024 г.</b></p><p> Примените https://github.com/yiisoft/yii-dataview/pull/225</p><p> <b>22 ноября 2024 г.</b></p><p> PDF-файл с исправлениями ошибок в папке inv/index</p><p> Нажатие на кнопку ограничения списка по умолчанию в сводке шаблона (первая кнопка) перенаправит вас к фактической настройке в общих настройках.</p><p> <b>21 ноября 2024 г.</b></p><p> Созданы ссылки-перенаправления из навигационной цепочки счета/индекса на определенные настройки в представлениях настроек, например, для счета-фактуры.</p><p> Каждая ссылка отображает текущие настройки со всплывающей подсказкой.</p><p> <b>16 ноября 2024 г.</b></p><p> Добавьте 4 кнопки действий в столбец действий окна просмотра/индекса.</p><p> <b>13 ноября 2024 г.</b></p><p> Переключатель «Только для чтения» устанавливает статус, например, «Черновик», «Отправлено», «Просмотрено», «Оплачено», что служит для сравнения, когда следует установить для счета-фактуры статус «Только для чтения». Добавлено еще несколько проверок.</p><p> <b>11 ноября 2024 г.</b></p><p> 1. Тестирование отправки электронного письма с PDF-вложением.</p><p> 2. Раздел Conflict в composer.json удален, поскольку Symfony 7.1.6 не удалось установить, поскольку в нем не удалось найти symfony/mime/file, от которого зависел yiisoft/mailer-symfony, и который не был обнаружен в symfony/mime 5.45.</p><p> 3. Общее тестирование счетов-фактур. Внесены некоторые изменения в отношении статуса «только для чтения».</p><p> <b>9 ноября 2024 г.</b></p><p> 1. Повторно протестируйте файлы .env и autoload с уровнем 1 псалма и функцией filter_var. Изменения внесены.<p><p> 2. Протестированы файлы public/index.php и консоль Yii в корневой директории. Внесены изменения.<p><p> 3. Логическое значение параметра &quot;Создать базу данных&quot; теперь отображается в меню приложения в разделе &quot;Производительность&quot; и выдает предупреждение, если после настройки оно не было возвращено в значение false.<p><p> 4. Добавьте функцию php-space-filter-var-test.php для проверки значений .env в командной строке с помощью функции filter_var.</p><p> 5. Если регистрация не удалась из-за отсутствия подключения к интернету, токен «отключен» со значением «already_used_token» и временным значением. Администратор должен активировать статус зарегистрированного пользователя.</p><p> <b>7 ноября 2024 г.</b></p><p> 1. Удалите поле email из сущности/таблицы userinv, несмотря на то, что для получения данных из поля email в таблице пользователей используется отношение getUser.</p><p> 2. Поле электронной почты сущности «Пользователь» отображается как «отключенное» в формах userinv.</p><p> 3. Если пользователь регистрируется на локальном компьютере без подключения к интернету, он сможет войти в систему при условии, что администратор активирует его учетную запись через userinv.</p><p> <b>31 октября 2024 г.</b></p><p> 1. Изменена конфигурация config/common/params для совместимости с yiisoft/mailer-symfony.</p><p> 2. Протестированы SignUpController и ForgotController, все они работают.</p><p> 3. Добавлены дополнительные заголовки электронных писем для авторизации.</p><p> <b>24 октября 2024 г.</b></p><p> 1. Исправления обратной совместимости yiisoft/mailer. Запросы на слияние 104–109.</p><p> 2. Шаблон(ы) тела сообщения удалены.</p><p> 3. -&gt;withCharSet(&#39;UTF-8&#39;) добавлено к сообщениям</p><p> 4. yiisoft/bootstrap5 dev-master используется в попытке удалить composer-dependency-checker Yiisoft\Bootstrap5\AlertType unknown sybmol error https://github.com/rossaddison/invoice/actions/runs/11365127873/job/31612623182</p><p> 5. Предыдущие MessageBodyTemplates перемещены в -&gt;withTextBody</p><p> 6. Небольшая корректировка/улучшение ресурсов/представлений/макета/оповещений с присвоением AlertVariants переменным вне оператора match.</p><p> 7. mailert-&gt;withAttached изменено на withAttachments</p><p> 8. Самостоятельно выработанный более дисциплинированный подход к использованию веток и запросов на слияние.</p><p> Проводится тестирование вышеуказанных изменений на one.com и начинается обсуждение в Yii3 использования веб-хуков с Telegram и их тестирования на one.com.</p><p> <b>23 октября 2024 г.</b></p><p> <b>Телеграмма</b></p><p> 1. Пошаговая инструкция из 10 шагов по использованию Telegram в разделе «Настройки... Просмотр...» (вкладка Telegram) для настройки уведомлений о платежах клиентов/покупателей.</p><p> 2. Функция getUpdates протестирована и работает.</p><p> 3. Веб-хук в настоящее время не используется, поскольку уведомления об оплате отправляются только администратору. Сообщения от клиентов не отправляются.</p><p> 4. В настоящее время сообщения из Telegram-аккаунта администратора, отправляемые боту, можно получить с помощью команды `getUpdates`, выполняемой вручную.</p><pre>
    $settingRepositoryTelegramToken = $settingRepository-&gt;getSetting(&#39;telegram_token&#39;);
    // Идентификатор чата первого сообщения (обычно это личный идентификатор чата администратора в Telegram, не относящийся к боту), отправленного боту
    // поскольку администратор будет получать уведомления о платежах от бота
    $telegramChatId = $settingRepository-&gt;getSetting(&#39;telegram_chat_id&#39;);
    $telegramHelper = new TelegramHelper(
        $settingRepositoryTelegramToken, 
        $this-&gt;logger
    );
    $this-&gt;telegramBotApi = $telegramHelper-&gt;getBotApi();
    $sendMessage = $this-&gt;telegramBotApi-&gt;sendMessage($telegramChatId, &#39;Hello World&#39;);</pre></p><p> 5. Далее: Используйте Telegram для автоматической отправки счета Telegram Invoice любому клиенту, находящемуся в групповом чате.</p><p> <b>13 октября 2024 г.</b></p><p> <b>Забыли пароль</b></p><p> 1. Пользователь нажимает на кнопку «Я забыл свой пароль» в форме входа.</p><p> 2. src/Auth/Controller/ForgotPasswordController.function forgot - Форма запроса токена сброса пароля отображается пользователю для ввода адреса электронной почты.</p><p> 3. После отправки формы на электронный адрес пользователя отправляется письмо со скрытой ссылкой.</p><p> 4a. Отображается страница viewInjection site/forgotalert, побуждающая пользователя перейти по ссылке в своем почтовом ящике.</p><p> 4b. Если параметр senderEmail на сайте не настроен, отображается сообщение viewInjection site/forgotfailed, предлагающее пользователю настроить параметр senderEmail в файле config/common/params.php.</p><p> 5. При нажатии на скрытую ссылку функция resetpassword в файле src/Auth/ResetPasswordController.php раскрывает токен.</p><p> 6. Если расшифрованный токен соответствует 32-битной строке в Token-&gt;token с типом &#39;request-password-reset&#39;, отображается форма с полями &#39;новый пароль&#39; и &#39;подтвердить новый пароль&#39;.</p><p> 7. Сразу после отправки этой формы применяется следующий алгоритм: https://github.com/yiisoft/yii2-app-advanced/blob/master/frontend/models/ResetPasswordForm.php:</p><pre>
   1.) setPassword in User 
   2) Обнулить PasswordResetToken, установив Token:token в значение null, но сохранив Token:type. 
       так что токен больше нельзя будет использовать.  
   3.) generateAuthKey in Identity
</pre><p>8. Если пароль был изменен, отображается сообщение viewInjection site/resetpasswordsuccess &#39;Сброс пароля&#39;.</p><p> 9. Если ввод пароля не удался, отображается сообщение viewInjection site/resetpasswordfailed &#39;Произошла ошибка при попытке отправить электронное письмо для сброса пароля. Пожалуйста, просмотрите журналы приложения или обратитесь к системному администратору.&#39;.</p><p> 10. Интерфейс регистратора записывает сообщения об ошибках.</p><p> 11. Настройки тестового сайта one.com включены в раздел часто задаваемых вопросов (FAQ) по общему хостингу.</P><p> <b>7 октября 2024 г.</b></p><p> <b>Регистрация пользователя:</b></p><p> 1. Функция signup в src/Auth/Controller/SignUpController — форма регистрации заполняется данными для входа, такими как имя пользователя, пароль и адрес электронной почты.</p><p> 2. Производится подсчет пользователей, и если это первый пользователь, то есть count == 1, пользователю назначается роль администратора. В противном случае назначается роль наблюдателя. См. файл resources/rbac/assignments.php</p><p> 3a. Токен подтверждения электронной почты генерируется из случайной строки, состоящей из 32 символов, а затем маскируется с помощью Yiisoft\Security\TokenMask перед отправкой по электронной почте.</p><p> 3b. Тип токена, например, email-verification-token, хранится вместе с незамаскированным токеном в таблице токенов, которая содержит различные типы токенов.</p><p> 4. Конструкция try-catch вызовет исключение, если электронное письмо не будет отправлено, и, следовательно, произойдет перенаправление.<p> 5. Как только пользователь перейдет по ссылке в своем почтовом ящике, будет использован маршрут config/common/routes/routes.php userinv/signup/{language}/{token}.<p> 6. На этом маршруте отсутствует промежуточное ПО AccessChecker =&gt; в целях безопасности... используется токен подтверждения электронной почты.</p><p> 7. При нажатии на ссылку открывается новое окно, в котором используются аргументы language и token в маршруте, после чего токен раскрывается.</p><p> 8. Токен подтверждения электронной почты с отметкой времени разделяется на сам токен и отметку времени, что позволяет пользователю подтвердить свою личность по электронной почте в течение часа (3600 секунд).</p><p> 9. Идентификация пользователя затем определяется с помощью этого токена, ссылающегося на src/auth/tokenRepository.</p><p> 10. Если администратор настроил параметр &#39;signup_automatically_assign_client&#39; в разделе Настройки...Общие, пользователю-наблюдателю будет автоматически назначен один клиент. Этот клиент идентифицируется с тем же адресом электронной почты, что и пользователь.</p><p> 11. После регистрации и входа в систему администратор может выбрать этот вариант, используя всплывающее сообщение «кнопка».</p><p> 12. После этого для данного клиента могут автоматически создаваться коммерческие предложения и счета-фактуры без необходимости вручную назначать клиента учетной записи userinv (расширенная таблица пользователей).</p><p> 13. Индекс клиентов был консолидирован, что позволило освободить место.</p><p> 14. В форме клиента обязательные и необходимые поля располагаются вверху страницы первыми. Клиент также использует такой порядок полей.</p><p> 15. Исправлена ​​ошибка в логотипе и адресе компании.</p><p> 16. Настройки... Общие включают две новые настройки: «Назначать клиента пользователю при регистрации» и «Назначать пользователю при регистрации клиента с минимальным возрастом по умолчанию восемнадцать лет». Включены в настройки по умолчанию в InvoiceController.</p><p> 17. Удалено поле пароля в таблице расширения userinv, поскольку пароль хешируется в таблице пользователей.</p><p> 18. В форму регистрации добавлено поле для ввода адреса электронной почты.</p><p> 19. В сущности Identity нет необходимости в поле user_id, поскольку связь hasOne Identity в таблице User автоматически его создает.<p> 20. Исправлена ​​ошибка: тип токена аутентификации был изменен с целого числа на строку.</p><p>21. Были улучшены типы столбцов в сущности «Клиент».</p><p> 22. Размер поля электронной почты в таблице пользователей составляет стандартные 254 символа.</p><p> 23. Поля salt, email и passwordresettoken были удалены из таблицы userinv (таблица пользователей InvoicePlanes), поскольку они будут обрабатываться независимо таблицей токенов и идентификаторов.</p><p> 24. В таблице токенов будут храниться различные типы токенов. Таблицу токенов можно перенести в &#39;blog-api&#39;, но пока она останется универсальной.</p><p> 25. Добавьте дополнительную настройку в common/config/params symfony-mailer &#39;enabled&#39; в качестве отмеченного параметра, используемого в SignUpController.php.</p><p> Далее: ссылка «Забыли пароль» в форме входа, а также ссылки reset-password-token и remember-me-token.</p><p> Совет: В целях тестирования очистка таблиц, то есть удаление из них строк, сбросит счетчик автоинкремента в каждой таблице MySQL, то есть проверьте все таблицы... выпадающее меню «с выбранными»... «Удалить данные или таблицу»... «Очистить».<p><p> <b>25 сентября 2024 г.</b></p><p> Для корректной работы репозитория Github автоматически сгенерировал отдельный файл codeql.yml.</p><p> Это было сделано в отношении:</p><p> 1. Включите подсказки ИИ через CodeQL, используя rossaddison/invoice ... настройки ... безопасность кода ... расширенные настройки.</p><p> 2. Поддержка jQuery, которая недавно включила CodeQL в свои рабочие процессы.<p> 3. Устранить необходимость постоянной проверки jQuery на наличие уязвимостей в их JavaScript.<p> Ссылка: <a href="https://docs.github.com/en/code-security/code-scanning/managing-code-scanning-alerts/about-autofix-for-codeql-code-scanning#limitations-of-autofix-suggestions">Ограничения предложений автоисправления</a></p><p> <b>18 сентября 2024 г.</b></p><p> Вкладка «Настройки...» содержит настройки «Прекратить вход в систему» ​​и «Прекратить регистрацию», которые связаны с файлом src\ViewInjection\LayoutViewInjection.php.</p><p> Сортировка полей «Цена», «Счет», «Продукт», «Клиент» может осуществляться как в файле index.php, так и в файле guest.php.</p><p> <a href="https://github.com/yiisoft/demo/pull/624">Примените интерфейс propertyTranslatorProviderInterface к формам входа и регистрации.</a></p><p> Счета можно пометить как «отправленные» с помощью одной кнопки в меню счетов/индексов, чтобы счет отобразился на стороне клиента.</p><p> Можно скопировать выбранные счета-фактуры, что удобно для пакетной обработки счетов-фактур из файла inv/index.php.</p><p> CodeQL включен в действия рабочего процесса, а бот Snyke используется для проверки на наличие уязвимостей в системе безопасности.</p><p> Устранено 40 уязвимостей безопасности. Удалены файлы, ответственные за их обнаружение.</p><p> jQuery получил уведомление о 12 уязвимостях безопасности в своей последней бета-версии. Все ответственные файлы были удалены из каталога ...src\Invoice\Asset\jquery-ui-1.14.0</p><p> Установите значение по умолчанию для параметра .env YII_DEBUG равным непустому значению. Если значение не пустое, то есть после знака &quot;=&quot; есть другое значение, оно сначала будет интерпретировано как строка, а затем как true. YII_DEBUG= соответствует false, тогда как YII_DEBUG=false соответствует true, поскольку значение не пустое.</p><p> Scrutinizer используется для анализа кода. Файл scrutinizer.yml находится в корневом каталоге.</p><p> bootstrap 4 data-toggle to bootstrap 5 data-bs-toggle.</p><p> Уязвимость JavaScript в файле emailtemplate.js устранена путем добавления отдельной сетки представления, связанной с индексом emailtemplate.</p><p> yiisoft-yii-view-renderer заменяет yiisoft/yii-view</p><p> <b>3 августа 2024 г.</b></p><p> Тестирование по псалмам 1-го уровня завершено с использованием указанного ниже формата файла.</p><p><pre><xmp>
    &lt;plugins&gt;&lt;pluginClass class=&quot;Psalm\SymfonyPsalmPlugin\Plugin&quot;/&gt;&lt;/plugins&gt;    
    &lt;projectFiles&gt;
        &lt;directory name=&quot;config&quot; /&gt;
        &lt;directory name=&quot;resources/views&quot; /&gt;
        &lt;directory name=&quot;src&quot; /&gt;
        &lt;file name=&quot;public/index.php&quot;/&gt;
        &lt;file name=&quot;yii&quot;/&gt;
        &lt;file name=&quot;autoload.php&quot;/&gt;
        &lt;ignoreFiles&gt;
            &lt;directory name=&quot;vendor/yiisoft/requirements/src&quot; /&gt;
        &lt;/ignoreFiles&gt;
    &lt;/projectFiles&gt;</xmp></pre></p><p> Проверку соответствия требованиям можно запустить в командной строке, например: C:\wamp64\www\invoice&gt;php requirements.php</p><p> Файл requirements.php находится в корневой папке.</p><pre> Проверка требований
        Этот скрипт проверяет, соответствует ли конфигурация вашего сервера требованиям.
        для запуска приложения Yii.
        Он проверяет, установлена ​​ли на сервере правильная версия PHP.
        если загружены соответствующие расширения PHP и если настройки файла php.ini верны.

        Проверьте заключение:
        -----------------

        Версия PHP: OK

        Расширение PDO для MySQL: OK

        Международное расширение: OK

        -----------------------------------------
        Ошибок: 0 Предупреждений: 0 Всего проверок: 3
    </pre><p>Отношения getPostalAddress, getDelivery и getDeliveryLocation, допускающие значение null: true, были удалены в пользу использования</p><p> Доступ к таблицам, связанным с инвентаризацией, через репозиторий для получения необходимой информации.</p><p> Что дальше: интеграция с Telegram.</p><p> <b>13 июля 2024 г.</b></p><p> 2. Папки p и q заполнены.</p><p> <b>5 июля 2024 г.</b></p><p>Обеспечьте обратную совместимость для нового модуля yiisoft/yii-view-renderer:</p><p> 1. В файле config/common/params внесены изменения, и пространство имен <code>use Yiisoft\Yii\View\ViewRenderer;</code> изменено на <code>use Yiisoft\Yii\View\Renderer\ViewRenderer;</code></p><p> Удалены избыточные маршруты...config/common/routes/routes.php</p><p> Псалом, уровень 1, тестирование папки invoice/config</p><p> Начато тестирование первого уровня программы Psalm для всех папок invoice/resources/views/invoice.</p><p> 1. Папки от z до r заполнены.</p><p> Псалом, уровень 1, файл future psalm.xml</p><p><xmp> &lt;plugins&gt;&lt;pluginClass class=&quot;Psalm\SymfonyPsalmPlugin\Plugin&quot;/&gt;&lt;/plugins&gt; &lt;projectFiles&gt; &lt;directory name=&quot;config&quot; /&gt; &lt;directory name=&quot;resources/views/invoice&quot; /&gt; &lt;directory name=&quot;src&quot; /&gt; &lt;file name=&quot;public/index.php&quot;/&gt; &lt;file name=&quot;yii&quot;/&gt; &lt;file name=&quot;autoload.php&quot;/&gt; &lt;/projectFiles&gt;</xmp></p><p> Что дальше: Тестирование мнений по псалму 1-го уровня...</p><p> Что дальше после тестирования Psalm: интеграция Telegram API от vjiks для, будем надеяться, уведомлений об оплате счетов клиентами.</p><p> <b>22 июня 2024 г.</b></p><p> 1. Добавьте проверку требований в раздел часто задаваемых вопросов, используя относительно новый репозиторий &#39;yiisoft/requirements&#39;.</p><p> 2. Протестировал генератор с фиктивной сущностью и внес в него несколько дополнительных исправлений.</p><p> 3. Фактические значения ini_get добавлены в раздел производительности главного меню.</p><p> 4. Алфавитный порядок файлов composer.json. (За исключением платежных провайдеров и временных форков rossaddison/, которые будут удалены позже).</p><p> 5. В файле docker-compose.yml номер версии больше не требуется.</p><p> <b>14 июня 2024 г.</b></p><p> 1. Форма для создания шаблонов электронных писем, а именно resources/views/invoice/emailtemplate/form.php, разделена на формы form_invoice и form_quote.</p><p> 2. Все поля ввода формы были закодированы в HTML, а сами формы были преобразованы с использованием PHP-кода Yiisoft вместо HTML.</p><p> 3. Генератор использовался для разработки новой сущности InvSentLog и был модернизирован. Дальнейшие усовершенствования, естественно, будут происходить по мере дальнейшего использования генератора.</p><p> 4. Назначение InvSentLog: регистрировать все счета-фактуры, отправленные по электронной почте конкретному клиенту. Индекс можно фильтровать по номеру счета-фактуры как на стороне клиента, так и на стороне администратора.</p><p> 5. Администратор также может фильтровать электронные письма по имени клиента. При этом отображается и пользователь, связанный с этим клиентом.</p><p> 6. Для поля «Клиент» (например, «Должность») создано дополнительное поле. Выпадающий список для этого поля формируется из файла invoice\resources\messages\en\app.php, расположенного в папке language.</p><p> 7. jQuery обновлен до последней версии, а именно: ui с 1.13.2 до 1.13.3 и с 3.6.0 до 3.7.1.</p><p> 8. Индекс UserInv теперь включает функцию отзыва всех ролей, т.е. отзыва ролей «Бухгалтер» и «Наблюдатель». Исключение составляет роль «Администратор».<p> 9. Пока vjik занят обновлениями, было создано несколько временных форков, например, rossaddison/... Они будут удалены позже.<p> 10. В почтовой программе была обнаружена ошибка, которая была исправлена ​​и протестирована на нескольких электронных письмах.</p><p> <b>24 апреля 2024 г.</b></p><p> Включите переменные stopLoggingIn и stopSigningUp в LayoutViewInjection.</p><p> Добавьте эти переменные в файл main.php.</p><p> Замените currentRoute на RouteArguments в файле InvoiceController.php</p><p> Теперь переменная `$debugMode` связана с файлом `.env`. Измените `debugMode` в файле `.env`, а не в `LayoutViewInjection`. Если переменная окружения `$_ENV[&#39;BUILD_DATABASE&#39;]` связана напрямую в файле `config/common params.php`, это приведет к снижению производительности, поэтому пока оставьте значение `false`.</p><p> <b>13 апреля 2024 г.</b></p><p> 1. Создайте функцию userinv/guestlimit, которая будет хранить последний выбор селектора ограничения размера страницы гостевого пользователя.</p><p> 2. Это значение является индивидуальным для каждого пользователя и не зависит от ограничителя default_page_size.</p><p> 3. Добавьте все статусы счетов в гостевую таблицу.</p><p> 4. Создайте отдельную страницу для учета платежей для авторизованных пользователей и их клиентов.</p><p> 5. Создайте отдельную страницу для регистрации онлайн-платежей и учета гостей, авторизованных для работы с клиентами.</p><p> 6. Добавлено дополнительное поле в пользовательское меню: ListLimit.</p><p> 7. Скорректированы макеты, а именно ...resources/views/layout guest.php, main.php и invoice.php, чтобы они лучше соответствовали логотипу.</p><p> 8. Внесены изменения в pdfHelper для поддержки дополнительных шаблонов. Следует отметить, что mpdfHelper несовместим с Bootstrap.</p><p> 9. Добавьте в гостевую таблицу два фильтра: «Номер счета» и «Общая сумма счета».</p><p> 10. Добавьте дополнительные статусы счетов-фактур в массив статусов InvRepository.</p><p> 11. Добавить в виджет PageSizeLimiter дополнительную функцию buttonsGuest, предназначенную для гостевых пользователей, оплачивающих счета.</p><p></p><p> <b>2 апреля 2024 г.</b></p><p> 1. Параметр режима отладки, обычно расположенный в файле ..\views\layout\invoice\main.php, перемещен в</p><p> ..\src\ViewInjection\LayoutViewInjection.php возвращает массив, например, &#39;debugMode&#39; =&gt; true,</p><p>2. Для иллюстрации внедрения стандартного представления для сайта было создано несколько базовых главных страниц с использованием<a href="https://bootstrapbrain.com/template/free-bootstrap-5-multipurpose-one-page-template-wave/">бесплатного шаблона BootstrapBrain Wavelight</a> .</p><p> 3. Все зависимые классы, например, bsb-, были удалены из шаблона, и остался только чистый код Bootstrap 5.</p><p> 4. На странице «О нас» добавлена ​​ссылка для выражения благодарности.</p><p> 5. Для иллюстрации страниц ..\src\ViewInjection\CommonViewInjection.php создан шаблон макета для соултрейдера, т.е. ..resources\views\layout\templates\soletrader\main.php</p><p> 6. На главных страницах используются переменные, объявленные в файле CommonViewInjection.php.</p><p> 7. Введен API для платежей Mollie. <a>https://github.com/mollie/mollie-api-php</a> Используется redirectUrl, а не webhookUrl. После совершения платежа на сайте Mollie клиенты перенаправляются обратно с помощью invoice_url_key. Этот ключ сопоставляется с метаданными Mollie invoice_url_key. После успешной оплаты над представлением счета отображается таблица платежей.</p><p> 8. Принимаются платежи по счетам-фактурам. TODO: Возврат средств будет возможен по балансирующим кредитным нотам, если по счету-фактуре произведен платеж.<p><p> 9. Обновлен индекс пользовательских полей.</p><p> 10. Были протестированы платежные шлюзы Amazon, Stripe и Mollie.</p><p> 11. Функции в контроллере PaymentInformationController были переименованы из &#39;form&#39; в &#39;inform&#39;, чтобы лучше отразить тот факт, что данные не собираются в форме в целях соответствия требованиям PCI.</p><p> 12. В функцию inv/getStatuses(Translator $translator) добавлены дополнительные статусы счетов-фактур, а именно: неоплаченный, напоминание, письмо, претензия, судебное решение, принудительное исполнение, кредитный счет-фактура за счет-фактуру, убыток.</p><p><p> <b>8 марта 2024 г.</b></p><p> Обновите индекс клиентов, добавив фильтры по имени и фамилии, а также мини-таблицу счетов-фактур для каждого клиента, используя Entity Client ArrayCollection.</p><p> Чтобы создать ArrayCollection и использовать его функции <b>count</b> и <b>toArray</b> для подсчета количества счетов-фактур.</p><p> и предоставить подробные сведения о балансе соответственно.</p><p> <b>27 февраля 2024 г.</b></p><p> Псалом 1. Тестирование уровня гидратации формы и внедрение модели формы.</p><p> Перенос соответствующего кода в шаблоны генератора.</p><p> Создание двух модальных виджетов Bootstrap: src\Widget\Bootstrap5ModalInv.php и src\Widget\Bootstrap5ModalQuote.php.</p><p></p> Дальнейшая интеграция сущности в конструкции форм для остальных сущностей.</p><p> <b>11 декабря 2023 г.</b></p><p> https://github.com/yiisoft/form/issues/298</p><p> Завершены процессы гидратации форм, создания модели формы для клиента, создания заметки для клиента и настройки параметров.</p><p> <b>18 ноября 2023 г.</b></p><p> Не используйте слово «Reset» (Сбросить) в контексте смены пароля. Вместо него используйте «Change» (Изменить). <a href=https://github.com/yiisoft/demo/pull/602>Запрос на слияние 602 находится в разработке.</a></p><p> Поэтому сброс переключил изменение на все файлы.</p><p> Функция сброса пароля в Yii3 всё ещё находится в стадии разработки.</p><p> <b>25 сентября 2023 г.</b></p><p> Исправлена ​​ошибка: переменная $ucR не определена. Сохраняйте ее в контроллере, а не в представлении.</p><p> Тестирование на yii3i.co.uk</p><p> Файл .htaccess, расположенный в корневом каталоге (yii3i.co.uk/), перенаправляет на /yii3i (основная папка yii3-i-main), указывая на папку public.</p><p> <a href = "https://stackoverflow.com/questions/23635746/htaccess-redirect-from-site-root-to-public-folder-hiding-public-in-url/23638209#23638209">Stackoverflow</a></p><p> <code>RewriteEngine On<br> RewriteBase /yii3i<br> RewriteCond %{THE_REQUEST} /public/([^\s?]*) [NC]<br> RewriteRule ^ %1 [L,NE,R=302]<br> RewriteRule ^((?!public/).*)$ public/$1 [L,NC]<br></code></p><p> <b>24 сентября 2023 г.</b></p><p> Для каждого товара можно создать несколько галерей изображений в разделе «Товары... Индекс... Просмотр... Просмотр... Изображения товаров».</p><p> Отчет о продажах по товарам/задачам</p><p> Исправлена ​​ошибка в InvItemAllowanceCharge Edit.</p><p> <b>20 августа 2023 г.</b></p><p> Каждый товар имеет дополнительное поле, называемое «Название и значение дополнительных свойств товара». Эти свойства товара можно добавить непосредственно в представлении товара.<p> Теперь к продукту можно добавить ряд дополнительных свойств с помощью сущности «Свойства продукта». </p><p><img src="/site/options.png" height="300" width="500"></p><p><img src="/site/ecosio_openpeppol_ubl_invoice_3_15_0.png" height="300" width="600"></p><p> Представляем Peppol (src\Invoice\Helpers\Peppol\PeppolHelper)</p><p> Можно сгенерировать <a href="https://ecosio.com/en/peppol-and-xml-document-validator-button/?pk_abe=EN_Peppol_XML_Validator_Page&pk_abv=With_CTA">электронный счет-фактуру в формате XML, подтвержденный Ecosio без ошибок</a> .<p> Представляем StoreCove (src\Invoice\Helpers\StoreCove\StoreCoveHelper)</p><p> Можно сгенерировать <a href="https://www.storecove.com/docs#_json_object">счет-фактуру в формате JSON от Storecove</a> .</p><p> <b>Требование 1:</b></p><p> При включенной функции НДС теперь можно создавать счета-фактуры с НДС.</p>
<p><b>Требование 2:</b></p><p> Функции подключения к API Store Cove созданы. (src\Invoice\InvoiceController.php store_cove_call_api)</p><p> <b>Требование 3:</b></p><p> <b>Электронные счета-фактуры в формате XML могут быть сформированы</b> при соблюдении следующей последовательности действий:</p><p> а) Зарегистрированный клиент настраивает свои данные Peppol на своей стороне через меню «Клиент...Просмотр...Параметры...Редактировать данные Peppol для электронного выставления счетов».</p><p> б) Администратор формирует и отправляет клиенту коммерческое предложение.</p><p> c: Зарегистрированный клиент создает заказ на продажу на основе коммерческого предложения, указывая в модальном окне номер своего заказа на покупку, <s>номер строки заказа на покупку</s> и контактное лицо.</p><p> d: Вошедший в систему клиент в каждой позиции заказа на продажу вводит номер позиции заказа на покупку и номер строки заказа на покупку. (Обязательно, иначе будет выдано исключение).</p><p> e: Администратор, вошедший в систему, запрашивает принятие условий.</p><p> f: Зарегистрированный пользователь принимает условия использования.</p><p> g: Администратор, вошедший в систему, обновляет статус заказа на продажу с «собран», «утвержден», «подтвержден» на «сгенерирован».</p><p> h: Администратор, вошедший в систему, может создать счет-фактуру, если статус заказа на продажу находится в положении «создать».</p><p> i: Теперь авторизованный администратор может создавать XML-счета Peppol, используя текущие обменные курсы, заданные в разделе «Настройки...Просмотр...Электронное выставление счетов Peppol...Одна из валют отправителя и одна из валют получателя».</p><p> j: Будут выданы исключения Peppol.</p><p> <b>22 марта 2023 г.</b></p><p> Подготовка к электронной системе выставления счетов Peppol: классы UBL созданы с использованием num-num/ubl-invoice. См. папку src/Invoice/Ubl. Протестировано на уровне 1 псалма.</p><p> HTML-версию счета-фактуры можно создать с помощью функции modal_inv_to_html в разделе «Вид...Параметры».</p><p> Логотип теперь размещается на счетах-фактурах.</p><p> Стандартный шаблон логотипа и адреса компании, созданный в разделе «Счета/Настройки/Виды».</p><p> Удалены расширения, вызывающие ошибки DOM. Клавиша F12 не вызывает ошибок.</p><p> Упрощенный вводный слайдер</p><p> Созданы 3 дополнительных параметра «Да/Нет» для 1. Потока (значок G) 2. Архива (значок папки) 3. HTML-кода (значок кода) в разделе «Настройки PDF».</p><p> Архивы сохраняются стабильно в папке src/Invoice/Uploads/Archives</p><p> Исправлена ​​ошибка: удаление элемента инвентаризации корректно перенаправляет на промежуточную страницу.</p><p> Исправлена ​​ошибка: Невозможно удалить элемент, если счет имеет статус «отправлен».</p><p> Счета-фактуры Zugferd архивируются в папке Invoice/Uploads/Temp/Zugferd с произвольным строковым именем файла.</p><p> <b>4 марта 2023 г.</b></p><p> Представляем ZugferdHelper и ZugferXml</p><p> Форма входа и форма регистрации — расширьте обе формы с помощью интерфейса RulesProviderInterface <a href>https://github.com/yiisoft/form/pull/249</a></p><p> Тестирование по псалму, уровень 1 — 0 ошибок.</p><p> <b>23 февраля 2023 г.</b></p><p> <s>Тестирование псалмов, уровень 1 — 1 ошибка — связано с фреймворком.</s></p> <code>ERROR: ImplementedReturnTypeMismatch - vendor/yiisoft/form/src/FormModel.php:218:33 - The inherited return type &#39;iterable <int|string, Yiisoft\Validator\RuleInterface|callable|iterable<int, Yiisoft\Validator\RuleInterface|callable> &gt;&#39; for Yiisoft\Validator\RulesProviderInterface::getRules is different to the implemented return type for Yiisoft\Form\FormModel::getrules &#39;array<array-key, mixed> &#39; (see https://psalm.dev/123) public function getRules(): array</code><p> <b>31 января 2023 г.</b></p><p> Тестирование по псалмам, уровень 2 — 0 ошибок.</p><p> Исправлена ​​ошибка: Редактирование задачи</p><p> <b>28 января 2023 г.</b></p><p> Helpers\CountryHelper\get_country_list</p><p> Приведенный ниже код работает, но приводит к ошибке UnresolvableInclude: Стоит к нему вернуться.</p><p> Тестирование по псалмам, уровень 2 - Задание 1</p> <code>/**<br> * Returns an array list of cldr =&gt; country, translated in the language $cldr.<br> * If there is no translated country list, return the english one.<br> *<br> * @param string $cldr<br> * @return mixed<br> */<br> public function get_country_list(string $cldr) : mixed<br> {<br> $new_aliases = new Aliases([&#39;@helpers&#39; =&gt; __DIR__, &#39;@country_list&#39; =&gt; &#39;@helpers/Country-list&#39;]);<br> $file = $new_aliases-&gt;get(&#39;@country_list&#39;) .DIRECTORY_SEPARATOR. $cldr .DIRECTORY_SEPARATOR.&#39;country.php&#39;;<br> $default_english = $new_aliases-&gt;get(&#39;@country_list&#39;) .DIRECTORY_SEPARATOR.&#39;en&#39;.DIRECTORY_SEPARATOR.&#39;country.php&#39;;<br> if (file_exists($file)) {<br> /**<br> * @psalm-suppress UnresolvableInclude<br> */<br> return (include $file);<br> } else {<br> /**<br> * @psalm-suppress UnresolvableInclude<br> */<br> return (include $default_english);<br> }<br> }<br></code><p> <b>27 января 2023 г.</b></p><p> Тестирование по псалму 3-го уровня (0 ошибок)</p><p> Тестирование</p><p> Обновите Amazon Pay: с версии 2.4.0 до 2.5.1</p><p> Протестируйте Amazon Pay с авторизацией клиента.</p><p> 1. Клиент зарегистрирован в качестве пользователя через демо-версию Yii.</p><p> 2. Идентификатор пользователя клиента был перенесен в UserInv через Настройки ... Учетная запись пользователя...+ посредством входа в систему администратора.</p><p>3. Идентификатор клиента (client_id) был присвоен его идентификатору пользователя (user_id) через Настройки ... Учетная запись пользователя ... Назначенные клиенты посредством входа в систему администратора.</p><p> Исправлена ​​ошибка с неизвестным регионом &#39;gb&#39;. Администратор должен выбрать один из трех регионов Amazon в выпадающем списке в разделе «Настройки... Онлайн-оплата».</p><p> В настройках платежного шлюза Amazon_pay добавьте в выпадающий список регионов три стандартных региона Amazon: Северную Америку, Европу и Японию.</p><p> Если регион не указан, по умолчанию используется значение &#39;eu&#39; в PaymentInformation/amazon_get_region.</p><p> Укажите время/часовой пояс по умолчанию в InvoiceController.</p><p> <b>23 января 2023 г.</b></p><p> Тестирование по псалму 3-го уровня (0 ошибок)</p><p> Повысьте безопасность просмотра клиентами своих коммерческих предложений/счетов в режиме онлайн с помощью следующего кода в функции InvController/url_key.</p><p> <code>// After signup the user was included in the userinv using Settings...User Account...+<br> $user_inv = $uiR-&gt;repoUserInvUserIdquery($currentUser_getId);<br> // The client has been assigned to the user id using Setting...User Account...Assigned Clients<br> $user_client = $ucR-&gt;repoUserClientqueryCount($currentUser_getId, $inv-&gt;getClient_id()) === 1 ? true : false;<br> if ($user_inv &amp;&amp; $user_client) {<br></code></p><p> Если метод getId объекта currentUser возвращает значение null, значит, пользователь является гостем. См. документацию. Yiisoft/CurrentUser</p><p> Примечание: Здесь необходимо отключить параметр Psalm PossiblyNullArgument, чтобы допустить возможное значение null для проверки статуса гостя Yiisoft.</p><p> Вход запрещен пользователям со статусом гостя Yiisoft.</p><p> <b>3 января 2023 г.</b></p><p> <a href="https://github.com/yiisoft/demo/issues/559"><s>Выпуск 559</s></a></p><p> Узбекский представлен</p><p> Псалмы уровней 7, 6, 5, 4. Проверка (0 ошибок).</p><p> <b>2 января 2023 г.</b></p><p> Псалмы уровней 7, 6, 5, 4. Проверка (0 ошибок).</p><p> <b>30 декабря 2022 г.</b></p><p> <b>12 шагов после настройки для ознакомления с азербайджанским языком</b></p><p> 1. config/web/params {locales}</p><p> 2. views/layout/invoice.php {az_Asset и построение меню}</p><p> 3a. views/layout/main.php {создание меню}</p><p> 3b. views/layout/guest.php {конструирование меню}</p><p> 4. SettingRepository/locale_language_array</p><p> 5. Настройки...Виды...Google Translate...выберите язык из выпадающего списка</p><p> 6. Генератор... Перевод src/Invoice/Language/English/ip_lang.php</p><p> 7. Генератор... Перевод src/Invoice/Language/English/gateway_lang.php</p><p> 8. Генератор... Перевод src/Invoice/Language/English/app_lang {скопировано из ...resources/messages/en/app.php</p><p> 9. Получить из ...views/invoice/generator/output_overwrite</p><p> 10. Скопировать output_overwrite/_ip_lang в src/Invoice/Language/{новый язык}</p><p> 11. Скопировать output_overwrite/_gateway_lang в src/Invoice/Language/{новый язык}</p><p> 12. Скопируйте файл output_overwrite/_app.php в ...resources/messages/{новая локаль}</p><p> <a href="https://github.com/yiisoft/demo/issues/559">Выпуск 559</a><p> <code>Psalm level 4 php ./vendor/bin/psalm --alter --issues=InvalidReturnType,MissingReturnType,LessSpecificReturnType,MissingParamType --dry-run</code><p> <b>29 декабря 2022 г.</b></p><p> Тестирование по псалму 4-го уровня (0 ошибок)</p><p> Используя генератор...Перевести{языковой файл} и Настройки...Просмотр...Google Translate...локаль,<p> Папки на языках африкаанс, русский, немецкий, украинский и вьетнамский созданы с помощью Google Translate.</p><p> <b>Внесены изменения в файлы, относящиеся к локали:</b></p><p> ...src/Invoice/Setting/SettingRepository/locale_language_array/{вставьте локаль}</p><p> ...src/Invoice/Asset/i18nAsset/{создайте свой файл с именем класса, совпадающим с именем файла}</p><p> ...resources/views/layout/main.php/{вставьте пункт меню языка}</p><p> ...resources/views/layout/invoice.php{вставьте пространство имен &#39;use&#39;, &#39;case&#39; и пункт меню.</p><p> ...скорректируйте параметр &#39;locales&#39; в файле config/params.</p><p> <b>28 декабря 2022 г.</b></p><p></p><p> Встроенный Google Translate используется для генерации языковых файлов, например, ip_lang.php, gateway_lang.php, app.php, для каждой локали.</p><p> <a href="https://github.com/googleapis/google-cloud-php-translate">Примеры здесь</a></p><p> <a href="https://console.cloud.google.com/iam-admin/serviceaccounts/details/
        // {unique_project_id}/keys?project={your_project_name}"">Создание облачного проекта.</a> <b>Шаги для получения JSON-файла, который необходимо сохранить в папке src/Invoice/google_tranlate_unique_folder.</b></p><p> 1: Загрузите файл https://curl.haxx.se/ca/cacert.pem в активную папку c:\wamp64\bin\php\php8.1.12</p><p> 2: Выберите свой проект, созданный вами по адресу https://console.cloud.google.com/projectselector2/iam-admin/serviceaccounts?supportedpurview=project&#39;</p><p> 3: Щелкните значок «Действия» и выберите «Управление клавишами».</p><p> 4: Добавить ключ</p><p> 5: Выберите опцию «Файл JSON» и загрузите файл в папку src/Invoice/Google_translate_unique_folder.</p><p> 6. Вам потребуется включить API облачного перевода и указать свои платежные данные. С вас будет списана 0 валют.</p><p> 7: Переместите файл из views/generator/output_overwrite, например, в src/Invoice/Language/{ваш язык}.</p><p><b>Чтобы выбрать язык для перевода: Настройки...Вид...Google Translate...{выпадающее меню}...сохранить</p><p> <b>Шаги для генерации, например, файла ip_lang.php</b></p><p> 1: Генератор ...Перевести English\ip_lang.php</p><p> 2: Либо скопируйте массив с экрана, либо переместите его из папки ..resources/views/generator/output_overwrite в соответствующую папку.</p><P> <s>3. Разделитель, например, &#39;YYYY&#39;, позволит вам выполнить поиск и замену, то есть найти &#39;YYYY&#39; и заменить &#39;, а также указать запятую, разделяющую каждый элемент массива в выводимом на экран массиве.</s></p><p> 4. Не забудьте перезапустить Netbeans 16 после внесения изменений в файл C:\Program Files\NetBeans-16\netbeans\etc\netbeans.conf и добавления параметра <code>&quot;-J-Dfile.encoding=UTF-8&quot;</code> к параметру &quot;netbeans_default_options&quot;. Это необходимо при работе с языками, содержащими специальные символы.</p><p> <b>26 декабря 2022 г.</b></p><p> Добавить дополнительные демонстрационные языки</p><p> <b>24 декабря 2022 г.</b></p><p> 1. Повторное тестирование отправки счетов по электронной почте.</p><p> 2. Устранить 55 ошибок в псалмах, в основном связанных с <a href="https://github.com/rossaddison/yii3-i/issues/5">проблемой № 5.</a><p> 3. Псалмы уровней 7, 6, 5, 4. Тестирование с использованием Псалма 5.4 вместо 4.3.</p><p> 4. Аудит настроек...Просмотр...Счет-фактура...Общий шаблон по умолчанию и пометка счетов-фактур как отправленных копий.</p> .<p> 5. Перемещен rossaddison/yii-invoice в rossaddison/yii3-i.</p><p> 6. Выполнена повторная синхронизация форка rossaddison/yii-invoice.</p><p> <b>20 декабря 2022 г.</b></p><p> 1. Переместил репозиторий в отдельную рабочую папку в папке blog, а папку blog-api — для организации отдельного рабочего процесса на GitHub.</p><p> 2. Счета-фактуры работают отдельно от блога. Гиперссылок на блог нет.</p><p> 3. Связи сущности «Пользователь» с функциями комментирования и публикации были удалены, поскольку они больше не требуются.<br> Однако пользователя, зарегистрированного в демонстрационной версии, все равно необходимо добавить в таблицу userinv, используя раздел «Настройки...Учетная запись пользователя».</p><p> 4. Новая настройка: <b>Счета-фактуры помечаются как «отправленные» при копировании</b> , чтобы клиент мог сразу просмотреть их онлайн, без необходимости отправки по электронной почте. См. Настройки...Просмотр...Счета-фактуры...Другие настройки. Это также полезно для тестирования серии счетов-фактур в платежном шлюзе.</p><p> 5. В массив SettingsRepository/payment_gateways для amazon_pay и braintree добавлен флажок «песочница». Если вы планируете использовать язык, отличный от английского, вам необходимо добавить <code>&#39;online_payment_sandbox&#39; =&gt; &#39;Sandbox&#39;,</code> в соответствующий файл src/Invoice/Language/{your_language}/gateway_lang.php. То есть, убедитесь, что файл gateway_lang.php в папке English соответствует вашей языковой папке.<p> 6. Платежный шлюз Omnipay со Stripe выдаст следующее предупреждение (принимать его не рекомендуется):</p><p> Платеж не удался. Пожалуйста, попробуйте еще раз. Ответ: Отправка номеров кредитных карт напрямую в API Stripe, как правило, небезопасна. Мы рекомендуем использовать тестовые токены, соответствующие используемой вами тестовой карте, см. https://stripe.com/docs/testing.</p><p> Вам нужно будет перейти по ссылке https://dashboard.stripe.com/settings/integration и включить следующий экран.</p><img src="/site/stripe.png" height="300" width="600"><p> 7. Статический анализ Github: тестирование псалмов уровней 7, 6, 5, 4 — ошибок 0.</p><p> 8. Функции src\User\Console\AssignRoleCommand и CreateCommand работают, поскольку роль наблюдателя может быть назначена клиенту, а результат будет отображаться в качестве назначения в ...invoices/resources/rbac</p><p> Чтобы достичь 4-го уровня псалмов, необходим следующий код для подавления ошибок, связанных с псалмами, на 4-м уровне:</p><p> 9. Введена платежная система Braintree Payment Gateway.</p> <code>/** * @psalm-suppress InvalidReturnType, InvalidReturnStatement, UndefinedInterfaceMethod */</code><p> Это нужно будет рассмотреть позже.</p><p> <b>10 декабря 2022 г. (Обновление июль 2025 г. - Omnipay удален)</b></p><p> Статический анализ Github: тестирование псалмов уровней 7, 6, 5, 4 — ошибок 0</p><p> 1. Представления «Платежи» и «Продавец (журнал онлайн-продаж)» обновлены до режима «Сетка».</p><p> 2. В массив платежного шлюза добавлен подмассив в разделе SettingRepository/payment_gateways. Функция <code>&#39;version&#39; =&gt; array( &#39;type&#39; =&gt; &#39;checkbox&#39;, &#39;label&#39; =&gt; &#39;Omnipay Version&#39; )</code><br> Это сделано для упрощения внедрения платежных шлюзов, соответствующих стандарту PCI. Два протестированных шлюза, соответствующих стандарту PCI, представленные здесь, это: Stripe версии 10 и Amazon_Pay.</p><p> 3. Если для конкретного платежного шлюза не отмечен флажок «Версия Omnipay», это означает, что он соответствует стандарту PCI.</p><p> 4. Снимите флажок «Версия Omnipay» для Stripe версии 10 и последней версии Amazon_Pay, которые были добавлены здесь.</p><p> 5. URL-адрес гостя удален из представления гостя. Пользователь/клиент, вошедший в систему с ролью «наблюдатель», видит список включенных платежных шлюзов в разделе «Параметры» в представлении счета гостя.</p><p> 6. Stripe версии 10 соответствует стандарту PCI, поскольку их CDN js.stripe.com/v3 обрабатывается напрямую, и данные кредитных карт не передаются.</p><p>7. Amazon Pay соответствует стандарту PCI, поскольку пользователь/клиент должен войти в свою учетную запись на amazon.co.uk, прежде чем сможет использовать кнопку Amazon. Данные кредитной карты не передаются третьим лицам.</p><p> 8. Форма информации о платеже включает поле для ввода данных кредитной карты, но эта форма отображается только при использовании платежных шлюзов с проверенной версией Omnipay.<p> 9. PaymentInformationController обрабатывает платежные шлюзы Omnipay и PCI-совместимые шлюзы.</p><p> 10. В систему Amazon_Pay интегрирован тип продукта, установленный на PayOnly (см. форму функции), поэтому клиенты могут оплачивать покупки, если у них есть учетная запись Amazon.</p><p> 11. Зарегистрируйтесь в качестве разработчика в Stripe, чтобы протестировать интеграцию с Omnipay.<p> 12. Следующий код, расположенный в папке ...resources/views/invoice/paymentinformation/payment_information_stripe_pci, имеет важное значение.</p><p> <code>. &#39;async function initialize() {&#39;<br> // To avoid Error 422 Unprocessible entity<br> // const { clientSecret } = await fetch(&quot;/create.php&quot;, {<br> // method: &quot;POST&quot;,<br> // headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },<br> // body: JSON.stringify({ items }),<br> // }).then((r) =&gt; r.json());<br> . &#39;const { clientSecret } = {&quot;clientSecret&quot;: &quot;&#39;. $client_secret .&#39;&quot;};&#39;<br> . &#39;elements = stripe.elements({ clientSecret });&#39;<br> . &#39;const paymentElementOptions = {&#39;<br> . &#39;layout: &quot;tabs&quot;&#39;<br> . &#39;};&#39;<br> . &#39;const paymentElement = elements.create(&quot;payment&quot;, paymentElementOptions);&#39;<br> . &#39;paymentElement.mount(&quot;#payment-element&quot;);&#39;<br> . &#39;}&#39;<br></code></p><p> 13. Stripe версии 10 работает для дебетовых/кредитных карт и для BAC-счетов. Войдите в систему как пользователь с ролью наблюдателя.</p><img src="/site/stripe_v_10.png" height="300" width="450"/><p> 14. Amazon Pay версии 2.40 работает, если вы одновременно авторизованы в Amazon. Войдите в систему как пользователь с ролью наблюдателя.</p><img src="/site/amazon_pay_v_2_40.png" height="300" width="450"/><p> 15. Функции, связанные с гостями, в PaymentController и MerchantController используют тот же подход, что и в InvController:</p><p> <code>// Get the current user and determine from (Related logic: see Settings...User Account) whether they have been given<br> // either guest or admin rights. These rights are unrelated to rbac and serve as a second<br> // &#39;line of defense&#39; to support role based admin control.<br><br> // Retrieve the user from Yii-Demo&#39;s list of users in the User Table<br> $user = $this-&gt;user_service-&gt;getUser();<br><br> // Use this user&#39;s id to see whether a user has been setup under UserInv ie. yii-invoice&#39;s list of users<br> $userinv = ($uiR-&gt;repoUserInvUserIdcount((string)$user-&gt;getId()) &gt; 0<br> ? $uiR-&gt;repoUserInvUserIdquery((string)$user-&gt;getId())<br> : null);<br><br> // Determine what clients have been allocated to this user (Related logic: see Settings...User Account)<br> // by looking at UserClient table<br><br> // eg. If the user is a guest-accountant, they will have been allocated certain clients<br> // A user-quest-accountant will be allocated a series of clients<br> // A user-guest-client will be allocated their client number by the administrator so that<br> // they can view their invoices and make payment<br> $user_clients = (null!== $userinv ? $ucR-&gt;get_assigned_to_user($user-&gt;getId()) : []);</code></p><h2> <a href="https://pay.amazon.co.uk/help/202022560">Примечания к Amazon Pay</a></h2><p> Для настройки Amazon Pay вам понадобятся идентификатор продавца (Merchant ID), открытый ключ (Open Key), идентификатор открытого ключа (Public Key ID) и закрытый ключ (Private Key).</p><p> Чтобы найти свои ключи и удостоверения личности:</p><ol><li> Войдите в свой торговый аккаунт Amazon Payments в <a href="https://sellercentral-europe.amazon.com" target="_blank">Seller Central.</a></li><li> Нажмите <strong>«Интеграция»</strong> , а затем <strong>«Центр интеграции».</strong></li><li> выберите свой <strong>канал интеграции</strong></li><li> Выберите <strong>поставщика решений для электронной коммерции</strong> или воспользуйтесь <strong>собственной разработкой.</strong></li><li> Выберите тип платежа в раскрывающемся списке <strong>«Тип платежа»</strong> .</li><li> Нажмите <strong>«Получить инструкции»</strong> , а затем в разделе «Инструкции» нажмите <strong>«Создать ключи»</strong> .</li></ol><p> Для активации кнопки «Войти через Amazon» на вашем веб-сайте вам потребуется идентификатор клиента/идентификатор магазина.</p><p> Для создания идентификатора клиента/идентификатора магазина или для управления приложениями:</p><ol><li> Войдите в свой торговый аккаунт Amazon Payments в <a href="https://sellercentral-europe.amazon.com" target="_blank">Seller Central.</a></li><li> Выберите <strong>Amazon Pay (режим &quot;Производство&quot;)</strong> из выпадающего списка в верхней части страницы.</li><li> <strong>Интеграция</strong> кликов в панели навигации, а затем нажмите <strong>«Центр интеграции».</strong></li><li> Прокрутите страницу до конца и нажмите <strong>«Просмотреть идентификатор клиента/идентификатор магазина»</strong> или нажмите <strong>«Создать новый идентификатор клиента/идентификатор магазина».</strong></li></ol><h2> <a href="https://stripe.com/docs/keys">Примечания для Stripe</a></h2><p> Ключ API — закрытый ключ, не используемый в пакете и не предназначенный для показа кому-либо. При желании его можно хранить в базе данных.</p><p> Публикуемый ключ, например, pk_... — Перейдите в панель управления Stripe по адресу https://dashboard.stripe.com и сохраните его в разделе Настройки...Вид...Онлайн-платежи...Stripe</p><p> Секретный ключ, например, sk_... - Перейдите в панель управления Stripe по адресу https://dashboard.stripe.com и сохраните его в разделе Настройки...Вид...Онлайн-платежи...Stripe</p><p> Все ключи, отображаемые в phpMyAdmin, закодированы с помощью Crypt и не имеют никакого сходства с оригинальными ключами.</p><p> javascript <code>$client_secret</code> в views/invoice/paymentinformation/payment_information_stripe_pci.php - генерируется намерением оплаты в PaymentInformationController/get_stripe_pci_client_secret на основе данных, переданных в намерение оплаты.</p><p> Файлы ...resources/views/layout/invoice.php и quest.php содержат следующие настройки, которые будут загружать либо ресурс Stripe, либо ресурс Amazon Pay.</p><p> <code>// &#39;0&#39; =&gt; PCI Compliant version<br> $s-&gt;getSetting(&#39;gateway_stripe_version&#39;) == &#39;0&#39; ? $assetManager-&gt;register(stripe_v10_Asset::class) : &#39;&#39;;<br> $s-&gt;getSetting(&#39;gateway_amazon_pay_version&#39;) == &#39;0&#39; ? $assetManager-&gt;register(amazon_pay_v2_4_Asset::class) : &#39;&#39;;<br></code></p><p> Включите эти платежные шлюзы в разделе «Настройки...Виды...Онлайн-платежи».</p><p> <b>11 ноября 2022 г.</b></p><p> Исправлена ​​ошибка: добавлена ​​интеграция 18.066. Пагинаторы работают с внешним статусом путем добавления статуса в urlArguments.</p> <code>OffsetPagination::widget()<br> -&gt;menuClass(&#39;pagination justify-content-center&#39;)<br> -&gt;paginator($paginator)<br> // No need to use page argument since built-in. Use status bar value passed from urlGenerator to quote/guest<br> -&gt;urlArguments([&#39;status&#39;=&gt;$status])<br> -&gt;render(),<br> )</code><p> <b>8 ноября 2022 г.</b></p><p> Добавить вкладки: черновик, отправлено, просмотрено, одобрено, отменено, отклонено. Просмотреть клиенту предложение.</p><p> Добавить вкладки: черновик, отправлено, просмотрено, оплачено; клиенту просмотреть счет-фактуру.</p><p> <b>4 ноября 2022 г.</b></p><p> Тестирование псалмов уровней 7, 6, 5, 4 - 0 ошибок</p><p> Составление смет и счетов на исправление ошибок</p><p> Переместил представления в раздел ресурсов.</p><p> <b>25 октября 2022 г.</b></p><p> Внесены изменения в GridView для таблиц «Счет-фактура», «Коммерческое предложение», «Товар» и «Пользовательский запрос» в соответствии с последними корректировками кода GridView. Теперь таблицу товаров можно сортировать.</p><p> Все таблицы сортируются по убыванию, т.е. к идентификатору массива Sort:: добавляется знак минус, т.е. -id.</p> <code>$sort = Sort::only([&#39;status_id&#39;,&#39;number&#39;,&#39;date_created&#39;,&#39;date_due&#39;,&#39;id&#39;,&#39;client_id&#39;]) // (Related logic: see vendor\yiisoft\data\src\Reader\Sort // - =&gt; &#39;desc&#39; so -id =&gt; default descending on id // Show the latest quotes first =&gt; -id -&gt;withOrderString($query_params[&#39;sort&#39;] ?? &#39;-id&#39;);</code><p> Параметры конфигурации электронной почты, упомянутые 11 октября, теперь необходимо связать со способом отправки электронной почты в разделе «Настройки...Электронная почта...Способ отправки электронной почты».</p><p> Следующий код, добавленный в конец последнего файла composer.json из репозитория yiisoft/demo, гарантирует, что rossaddison/yii-invoice будет работать.</p><p> Будет работать с psr-3. Будет выбрана ветка dev-psr-3.</p> <code>&quot;rossaddison/mpdf&quot;: &quot;*&quot;</code><p> Уровень псалмов - 7, 6, 5, 4. Проверка - 0 ошибок.</p><p> Укажите дату начала и дату окончания для компании и частного юридического лица.</p><p> Теперь архивированные PDF-файлы можно автоматически отправлять с одним вложением по электронной почте, используя Настройки...Вид...Электронная почта...Прикрепить коммерческое предложение/счет к электронному письму?</p><p> Функция MailerHelper/yii_mailer_send<br> <code>$path_info = pathinfo($pdf_template_target_path);<br> $path_info_file_name = $path_info[&#39;filename&#39;];<br> $email_attachments_with_pdf_template = $email-&gt;withAttached(File::fromPath(FileHelper::normalizePath($pdf_template_target_path),<br> $path_info_file_name,<br> &#39;application/pdf&#39;)<br> );<br></code></p><p> <b>11 октября 2022 г.</b></p><p> Уровень псалмов - 7, 6, 5, 4. Проверка - 0 ошибок.</p><p> В разделе «Настройки...Просмотр...Электронная почта» отображаются некоторые параметры файла config/params.php, созданные с помощью функции <code>config_params</code> из репозитория SettingRepository.</p><p> <code>public function config_params() : array {<br> $config = ConfigFactory::create(new ConfigPaths(dirname(dirname(dirname(__DIR__))), &#39;config/&#39;), null);<br> $params = $config-&gt;get(&#39;params&#39;);<br> $config_array = [<br> &#39;esmtp_scheme&#39; =&gt;$params[&#39;symfony/mailer&#39;][&#39;esmtpTransport&#39;][&#39;scheme&#39;],<br> &#39;esmtp_host&#39;=&gt;$params[&#39;symfony/mailer&#39;][&#39;esmtpTransport&#39;][&#39;host&#39;],<br> &#39;esmtp_port&#39;=&gt;$params[&#39;symfony/mailer&#39;][&#39;esmtpTransport&#39;][&#39;port&#39;],<br> &#39;use_send_mail&#39;=&gt;$params[&#39;yiisoft/mailer&#39;][&#39;useSendmail&#39;] == 1 ? $this-&gt;trans(&#39;true&#39;) : $this-&gt;trans(&#39;false&#39;),<br> ];<br></code>
        return $config_array;<br> }</p><p> Продолжите аудит настроек.</p><p> Исправлена ​​ошибка в тестовых данных.</p><p> <b>4 октября 2022 г.</b></p><p> Тестирование по псалмам 4-го уровня завершено — исправлено 150 ошибок.</p><p> <b>1 октября 2022 г.</b></p><p> К счетам-фактурам можно прикреплять файлы. Мера безопасности — функция <code>is_uploaded_file php</code> , использующая именно временный файл. См. функцию `InvController/attachment_move_to`.</p><p> Внесите изменения в шаблоны генератора</p><p> <b>21 сентября 2022 г.</b></p><p> Упростите права доступа в AccessChecker до 4 основных разрешений: editInv, viewInv, editPayment, viewPayment и editUser для всех контроллеров.<p> Включение кода PHP-форм Yii для замены HTML-кода в формах mailer_quote и mailer_invoice.</p><p> Псалом 6-го уровня - 155 ошибок исправлено. Оставшиеся ошибки связаны с демо-версией yii.</p><p> В псалме 5-го уровня исправлены ошибки (47). Оставшиеся ошибки связаны с демо-версией yii.</p><p> YiiMailer (адаптация Symfonymailer) заменяет phpmailer, используя код, предоставленный в yii-demo.</p><p> Файлы можно прикреплять к электронным письмам с помощью функции «Отправить электронное письмо» в выпадающем меню «Параметры» в окне просмотра коммерческого предложения/счета в Yii. Настройка шаблонов электронных писем необязательна.</p><p> Пользователи с ролью наблюдателя могут просматривать коммерческие предложения или счета-фактуры, а затем получать доступ к разделу «утвердить или отклонить», используя гостевой URL-адрес из коммерческого предложения или счета-фактуры и вставляя его в браузер.</p><p> Включение приведенного ниже кода в файл config/params и внесение изменений в MailerHelper и TemplateHelper для упрощения отправки электронных писем.</p><p> Шаблоны электронных писем работают с помощью JavaScript, и анализ данных для создания шаблона функционирует корректно.</p><p> <s>Примечание: В настоящее время для отображения шаблона электронного письма используется текстовое поле PHP в Yii, а не предпочтительнее текстовая область.</s></p><p> Отправка коммерческих предложений/счетов по электронной почте с корректировкой параметров конфигурации. <code>&#39;yiisoft/mailer&#39; =&gt; [<br> &#39;messageBodyTemplate&#39; =&gt; [<br> &#39;viewPath&#39; =&gt; &#39;@src/Contact/mail&#39;,<br> ],<br> &#39;fileMailer&#39; =&gt; [<br> &#39;fileMailerStorage&#39; =&gt; &#39;@runtime/mail&#39;,<br> ],<br> &#39;useSendmail&#39; =&gt; false,<br> &#39;writeToFiles&#39; =&gt; false,<br> ],<br> &#39;symfony/mailer&#39; =&gt; [<br> &#39;esmtpTransport&#39; =&gt; [<br> &#39;scheme&#39; =&gt; &#39;smtp&#39;, // &quot;smtps&quot;: using TLS, &quot;smtp&quot;: without using TLS.<br> &#39;host&#39; =&gt; &#39;mail.btinternet.com&#39;,<br> &#39;port&#39; =&gt; 25,<br> &#39;username&#39; =&gt; &#39;ross.addison@yourinternet.com&#39;,<br> &#39;password&#39; =&gt; &#39;yourpassword&#39;,<br> &#39;options&#39; =&gt; [], // See: https://symfony.com/doc/current/mailer.html#tls-peer-verification<br> ],<br> ],</code><p> В макете счета-фактуры панель навигации включает в себя выдвижное меню, которое работает с кнопкой меню в виде «гамбургера», если макет НЕ занимает весь экран, и перемещается слева.</p><p> Роль: Наблюдатель, обеспечивающий возможность клиентам просматривать свои предложения, счета и платежи в режиме онлайн.</p><p> <b>Назначить клиенту роль наблюдателя, чтобы он мог просматривать свои счета-фактуры в режиме онлайн.</b></p><p> <b>Шаг 1:</b> Зарегистрируйте пользователя с помощью Yii-demo.</p><p> <b>Шаг 2:</b> Войдя в систему как администратор, убедитесь, что новый пользователь является клиентом, т.е. Клиент...Просмотр...Новый</p><p> <b>Шаг 3:</b> От имени администратора убедитесь, что у этого пользователя есть гостевые (только для чтения) права доступа в разделе «Настройки...Учетная запись пользователя».</p><p> <b>Шаг 4:</b> Добавьте зарегистрированного клиента/пользователя в таблицу «Настройки...Учетные записи пользователей» и используйте значок «гамбургер» в разделе «Назначенные клиенты», чтобы добавить/связать этого клиента с его идентификатором пользователя.</p><p> <b>Шаг 5:</b> Используйте assignRole &#39;observer&#39; и идентификатор пользователя из учетной записи пользователя, чтобы назначить этому пользователю/клиенту права наблюдателя.</p><p> <code>C:\wamp64\www\yii-invoice&gt;yii user/assignRole observer 3</code></p><p> <b>Шаг 6:</b> Создайте несколько счетов-фактур для этого пользователя/клиента, вошедшего в систему как администратор, и добавьте платежи.</p><p> <b>Шаг 7:</b> Войдите в систему как пользователь/клиент и просмотрите счета-фактуры и связанные с ними платежи, которые вы, как администратор, создали для них.</p><p> Логотип Yii постоянно отображается в панели навигации, при этом сам логотип находится в папке &quot;Общедоступные&quot;.</p><p> Логотип входа в систему, ранее находившийся в разделе «Настройки... Общие», перемещен в раздел «Настройки... Личные данные компании».</p><p> Теперь каждая запись в личных данных компании может иметь собственный логотип/иконкурент.</p><p> Это полезно для логотипа компании, который меняется со временем, например, старые счета-фактуры сохраняют свой прежний логотип.</p><p> Вместо HTML-тегов форм используйте в Yii <code>Form::tag() -&gt;post($urlGenerator-&gt;generate(...$action)) -&gt;enctypeMultipartFormData() -&gt;csrf($csrf) -&gt;id(&#39;CompanyPrivateForm&#39;) -&gt;open()</code></p><p> <code>C:\wamp64\www\yii-invoice&gt;php ./vendor/bin/psalm --alter --issues=InvalidNullableReturnType, InvalidReturnType, MissingReturnType, LessSpecificReturnType, MismatchingDocblockParamType, MismatchingDocblockReturnType, MissingParamType --dry-run</code></p><p> <b>20 августа 2022 г.</b></p><p> Шрифт меню увеличен.</p><p>Тестирование Psalm Level 7 с использованием <code>php ./vendor/bin/psalm</code> в командной строке: 0 ошибок.</p><p> Обновлен индекс для коммерческих предложений и счетов-фактур — заголовки можно сортировать.</p><p> В разделе «Настройки..Вид..Налоги для налоговой отчетности» добавьте поле с тремя полями ввода для указания даты начала налогового года.</p><p> Для выставления счетов укажите формат Ymd H:i:s.</p><p> Составлены <b>отчеты</b> по продажам по клиентам, продажам по датам, истории платежей и анализу сроков погашения счетов.</p><p> Переместите код схемы счета/индекса в Generator...Schema.</p><p> Настройки...Учетная запись пользователя функциональна. Оплата...Ввод функционален.</p><p> После оплаты счета редактировать его нельзя. В счете используется флаг «только для чтения», а кнопки отключены.</p><p> Чтобы избежать проблем, связанных с psr3 и непустыми возвращаемыми типами в mpdf/mpdf, я создал форк последнего репозитория разработки mpdf/mpdf и внес изменения в соответствующие файлы.</p><p> Форк rossaddison/mpdf добавлен в файл composer.json. Хотя на данном этапе он будет работать с версией mpdf/mpdf 8.016, использующей psr 2, я уверен, что ошибки, связанные с void, не будут отображаться в Yii.</p><p> <b>29 июля 2022 г.</b> - Тестирование Psalm с использованием команды &#39;php ./vendor/bin/psalm&#39; в командной строке - статические ошибки устранены. Количество информационных сообщений сокращено с 2800 до 2000.</p><p> Теперь в представлении клиента отображаются вкладки с подробной информацией о клиенте, коммерческими предложениями, счетами-фактурами, примечаниями и настраиваемыми полями.</p><p> В файл client.js добавлен соответствующий JavaScript-код: функции load_client_notes и save_client_notes.</p> <b>21 июля 2022 г.</b><p> Файл Invoice/Layout/main.php перемещен в @views/layout/invoice.php. Значение параметра cldr получает значение $session-&gt;get(&#39;_language&#39;) через выпадающий список локали.</p><p> Значение $s настраивается для @views/layout/invoice.php (отличается от демонстрационного макета, т.е. views/layout/main.php) в файле config/params.php yii-soft/view Reference::to, а НЕ через InvoiceController. Значение $s необходимо в этом макете для записи текущей локали в настройках cldr, если она выбрана ДО входа в систему. Например: <code><s>$s-&gt;save_session_locale_to_cldr($session-&gt;get(&#39;_language&#39;) ?? ($s-&gt;getSetting(&#39;cldr&#39;) ? $s-&gt;getSetting(&#39;cldr&#39;) : &#39;en&#39;));</s></code><p></p><p> Выпущенная недавно версия jQuery 1.13.2 теперь используется по умолчанию. Версия jQuery 1.13.0 удалена.</p><p> В демонстрационном режиме меню теперь включает возможность тестирования данных с предварительно настроенными клиентами, продуктами, группами, налоговыми ставками. Доступна функция удаления демонстрационных клиентов(2) и продуктов(2).</p><!-- comment --><p> В этом помогают две дополнительные настройки на вкладке «Настройки», например, «Установить тестовые данные» и «Использовать тестовые данные». Они работают с функциями «Генератор»... «Удалить тестовые данные»... «Сбросить тестовые данные».</p><p> Теперь поля выбора даты автоматически меняются в соответствии с выпадающим списком языковых настроек, например, с помощью функции JavaScript в файле views/client/form.php внизу страницы.</p><p> Отдельные элементы выбора даты были удалены, и на странице @views/layout/invoice.php используется только один элемент выбора даты. <code>...php<br> $js11 = &quot;$(function () {&quot;. &#39;$(&quot;.form-control.input-sm.datepicker&quot;).datepicker({dateFormat:&quot;&#39;.$datehelper-&gt;datepicker_dateFormat()<br> .&#39;&quot;, firstDay:&#39;.$datehelper-&gt;datepicker_firstDay()<br> .&#39;, changeMonth: true&#39;<br> .&#39;, changeYear: true&#39;<br> .&#39;, yearRange: &quot;-50:+10&quot;&#39;<br> .&#39;, clickInput: true&#39;<br> .&#39;, constrainInput: false&#39;<br> .&#39;, highlightWeek: true&#39;<br> .&#39; });&#39;.<br> &#39;});&#39;;<br> echo Html::script($js11)-&gt;type(&#39;module&#39;);<br></code><p> Все настройки в папке views/invoite/setting/views проверяются с помощью оператора <code>$s-&gt;where(&#39;number_format&#39;)</code> который выводит всплывающую подсказку о том, почему и где используется та или иная настройка.</p><p> config/params.php: Раскомментирование строки Synctables (теперь структура таблиц относительно постоянна) и присвоение параметра READ_AND_WRITE ниже, что значительно повышает производительность.</p> <code>\Yiisoft\Yii\Cycle\Schema\Provider\PhpFileSchemaProvider::class =&gt; [ &#39;mode&#39; =&gt; \Yiisoft\Yii\Cycle\Schema\Provider\PhpFileSchemaProvider::MODE_READ_AND_WRITE, &#39;file&#39; =&gt; &#39;runtime/schema.php&#39;, ],</code><p> Включение всех стран взято из https://en.wikipedia.org/wiki/ISO_4217</p><p> <b>9 июля 2022 г.</b> — Тестирование Psalm с использованием команды ./vendor/bin/psalm в командной строке завершено. Удалено 155 статических ошибок и избыточный код.</p><p> <s><a href="https://github.com/yiisoft/demo/issues/439" >Проблема 439: Связь BelongsTo не обновляется при редактировании поля связи, например, поле связи «Налоговая ставка» в поле «Продукт» не редактируется и не обновляется.</a></s> 
<s>Путь к абсолютной очистке кэша находится в функции очистки SettingsController, и его необходимо будет настроить в соответствии с вашими параметрами в режиме отладки.</s> <s>public function clear() $directory = &quot;C:\wamp64\www\yii-invoice\public\assets&quot;;</s><p> Функция очистки кэша в SettingsController теперь работает и без указания абсолютного пути.</p><p> Администратору LAMP необходимо будет добавить достаточные права доступа к папке общедоступных ресурсов с помощью команды <code>sudo chown -R username folderpath</code> прежде чем ресурсы можно будет удалить в режиме отладки.</p><p> Коммерческое предложение — Коммерческое предложение функционально, то есть его можно преобразовать в PDF-файл <s>, но функция отправки по электронной почте должна быть доработана.</s> Функция отправки по электронной почте протестирована с помощью sendmail. Тестирование с SMTP находится в процессе.</p><p> Счет-фактура — Счет-фактура функциональна, т.е. ее можно преобразовать в PDF-файл и заархивировать, <s>но функция отправки по электронной почте еще должна быть разработана.</s> Функция Sendmail также функциональна.</p><p> Повторяющиеся счета — функциональная функция, но не прошедшая полного тестирования.</p><p> Оплата может быть оформлена на счет-фактуру. В последней версии League/Omnipay v3.2 в файл composer.json будут добавлены несколько основных платежных систем.</p><p> Пользовательские поля — работа над ними ещё не начата.</p><p> Прикрепление файлов — пока не запущено.</p><p> Настройки...Вид (Режим отладки, т.е. красный) - Эти настройки используются.</p><p> Настройки...Вид (не в режиме отладки, т.е. не красный) - Некоторые из них используются. В настоящее время их функциональность анализируется в Invoiceplane.</p><p> Таблица userinv является расширением таблицы user из yii/demo и содержит всю важную информацию о пользователе.</p></p> <b>Настройка</b><p> Если параметр &#39;default_settings_exist&#39; отсутствует, таблица настроек изначально формируется с помощью массива настроек по умолчанию, предоставленного контроллером InvoiceController.</p> <b>Генератор</b><p> Шаблоны генератора кода были адаптированы в соответствии с последними обновлениями демонстрационной версии.</p> <b>Аннотации</b><p> Длинные аннотации сущностей были заменены более лаконичной структурой кодирования атрибутов. Например, <code>* @ORM\Column(type=&quot;string&quot;)</code> заменено на <code>#[ORM\Column(type: &quot;string&quot;)]</code> . <s>Однако в настоящее время актуальна проблема 439.</s></p> <b>Демонстрационный режим</b><p> Переменную режима демонстрации, расположенную в файле src\Invoice\Layout\main.php, например, <code>$demo_mode</code> можно установить в значение false, чтобы отключить настройки производительности и инструмент очистки кеша. Все области, выделенные красным, будут удалены.</p> <b>JQuery</b><p> Для пользовательских полей и небольших модальных окон используется версия jQuery 3.6.0 (от 2 марта 2021 г.). Временно в AppAsset используется файл dependencies.js из Invoiceplane. Модальные окна зависят от него.</p> <b>HTML-теги в представлениях</b><p> Улучшить отображение можно, добавив больше тегов, связанных с Yii, например, используя <code>Html::tag</code> . Html::encode является обязательным или всегда присутствующим.</p> <b>Пагинатор</b><p> Длину списков можно изменить в настройках/виде: <code>default_list_limit</code></p> <b>Локалы</b><p> Функция SettingRepository <code>load_language_folder</code> принимает значение локали из выпадающего списка, полученное через функцию <code>$session-&gt;get(&#39;_language&#39;)</code> из yiisoft/demo: этот параметр имеет приоритет над параметром &#39;default_language&#39; в базе данных, если он задан.</p> <b>Язык клиента отличается от locale_derived_language или резервных настроек &#39;default_language&#39;.</b><p> При печати язык клиента гарантирует, что документация будет распечатана на его языке с помощью функции <code>$session-&gt;get(&#39;print_language&#39;)</code><p> После печати переменная сессии <code>print_language</code> сбрасывается.</p> <b>Языки</b><p> Все слова, используемые вне папок Invoiceplane, будут переведены с использованием методики перевода Yii.</p><p> Язык меню, указанного выше, можно задать в разделе ...resources/messages для конкретного языка.<p> Языковые папки можно импортировать из Invoiceplane, но в каждый файл внутри этой папки необходимо вставить следующий код <code>declare(strict_types=1);</code></p> <b>Шаги по включению языка</b><p> 1. Добавьте папку language в src/Invoice/Language после добавления declare(strict_types) в каждый файл.</p><p> 2. Добавьте новый язык в массив locale_language_array объекта SettingsRepository.</p><p> 3. Отрегулируйте массив locales в файле config/params.php.</p><p> 4. Настройте меню в файле views/layout/main.php.</p><p> 5. Настройте языковой массив для каждой из папок ресурсов/сообщений.</p><p> 6. CJK (китайский, японский, корейский) языки<a href="https://mpdf.github.io/fonts-languages/cjk-languages.html"></a> Для просмотра файла с невстроенными шрифтами CJK (китайский-японский-корейский) вам и другим пользователям необходимо загрузить пакет азиатских шрифтов для Adobe Reader для следующих языков: китайский (упрощенный), китайский (традиционный), корейский и японский. <a href="https://helpx.adobe.com/acrobat/kb/windows-font-packs-32-bit-reader.html">Для Windows</a> <a href="https://helpx.adobe.com/acrobat/kb/macintosh-font-packs�acrobat�reader-.html">Для Mac</a></p><p>Если при просмотре PDF-файлов, например, с помощью стандартного средства чтения PDF в Chrome, появляются пробелы там, где должен отображаться текст, добавьте расширение Chrome PDF Viewer 2.3.164.</p><p> 7. При копировании и вставке папки «Китайский упрощенный» убедитесь, что вы удалили пробел между словами «Китайский» и «Упрощенный». Например: ChineseSimplified. Это верблюжий регистр.</p> <b>Netbeans: <a href="https://stackoverflow.com/questions/59800221/gradle-netbeans-howto-set-encoding-to-utf-8-in-editor-and-compiler">Как включить UTF-8 в Netbeans</a></b><p> Установите глобально используемую в Netbeans кодировку UTF-8. Добавьте в netbeans.conf параметр &quot;-J-Dfile.encoding=UTF-8&quot; к параметру &quot;netbeans_default_options&quot;. К сожалению, это необходимо делать каждый раз при редактировании файла, содержащего &quot;специальные буквы&quot;. Поэтому отредактируйте файл, указав указанную выше кодировку UTF-8, сохраните его, а затем удалите указанную выше настройку из Netbeans.conf.</p><p> Расположение файла: C:\Program Files\NetBeans-16\netbeans\etc\netbeans.conf Открыть с помощью блокнота Ctrl+F netbeans_default_options</p> <b>Улучшенные функции</b><p> В разделе «Вид» можно указать дату начала налогового года, например, 06.04.2022, чтобы отчеты по умолчанию использовали эту дату в качестве начальной.</p><p> Отчет о сроках погашения счетов включает номер(а) счета(ов) непогашенной задолженности.</p><p> Отчет «Продажи по клиентам» содержит более подробную информацию, включая продажи без учета налога, налог на товар, налог по счету-фактуре и сумму продаж с учетом налога.</p><p> Отчет «Продажи по датам» (или «Продажи по годам») разбивает каждую продажу по клиенту на кварталы за выбранные годы.</p><p></p><p> В окне запроса можно выбрать несколько товаров в количестве 1 шт., используя значок «гамбургер» или «три горизонтальные линии».</p><p> С помощью кнопки «Удалить элемент» можно удалить несколько элементов одновременно.</p><p> Информация о компании разделена на общедоступную и закрытую. Таблица профилей предназначена для размещения нескольких про<p> Все настройки в окне настроек по-прежнему должны быть привязаны к своему конкретному назначению путем сверки с исходфилей, особенно в случае изменения адресов электронной почты и номеров мобильных телефонов.</p><p> Если ставка налога установлена ​​по умолчанию, она будет применяться ко всем новым коммерческим предложениям и счетам-фактурам. То есть, ставка налога для коммерческого предложения будет автоматически создана на основе этой ставки налога и будет использоваться во всех новых коммерческих предложениях. То же самое будет применяться ко всем счетам-фактурам.</p><p> Если вы хотите создать группу коммерческих предложений или счетов-фактур, специфичную для конкретного клиента, используйте функцию «Настройки...Группа», чтобы задать идентификатор группы, например, JOE для компании JOE Ltd. К идентификатору JOE будет добавлен следующий идентификатор, например, JOE001.</p><p> Товары и задачи могут быть внесены в счет-фактуру отдельно и являются взаимоисключающими, поэтому, если вы вносите задачу, вы не можете одновременно внести товар.</p> <b>Устаревшие оригинальные функции</b><p> Темы будут представлены позже.</p><p> Данная разработка не предполагает устаревания каких-либо функций, уже имеющихся в InvoicePlane.</p> <b>Предлагаемые функции</b><p> Обновление форм для включения структуры форм на основе PHP или серверной архитектуры, используемой в демонстрационной версии.</p><p> Взаимосвязанная базовая система бухгалтерского учета для аудита операций и создания аудиторского следа счетов-фактур и платежей.</p> <b>Безопасность</b><p> Все свойства сущности, инициализированные до создания объекта, должны быть приватными. Доступ к приватному свойству осуществляется через публичный метод-геттер, который создается ниже объекта.</p> <b>Причины использования упрощенного <code>id</code> в качестве первичного ключа во всех таблицах</b><p> См. структуру <a href="https://cycle-orm.dev/docs/annotated-relations/1.x/en#belongsto">{relationName}_{outerKey}</a> , где outerKey — это первичный ключ. Например, поле <code>tax_rate_id</code> в таблице Product является отношением или внешним ключом в таблице Product, равным и указывающим на <code>id</code> таблицы Tax Rate в родительской таблице, поэтому <b>переменная</b> имени отношения в сущности: Product должна быть <code>$tax_rate</code> , и, объединив outerKey с <code>$id</code> вы получите <code>$tax_rate_id</code> , который соответствует внешнему ключу <code>$tax_rate_id</code> в сущности: Product. Если бы первичный ключ в таблице Tax Rate назывался, например, tax_rate_id, а не id, то отношению нельзя было бы присвоить имя.</p> <b>Дальнейшая работа</b><p> Статическая проверка псалмов и удаление информационных подсказок.</p><p> Функция Mailer от Yiisoft использует параметр конфигурации по умолчанию adminEmail для userinv-&gt;email.</p><p> Необходимо разработать новую функцию для пользовательских полей продукта.</p><p> Зависимость Client Custom Fields от client_custom_fields.js будет удалена, как это было сделано для Payment Custom Fields.</p><p> Избыточные функции, сгенерированные генератором, необходимо удалить.</p> <b>Работа продолжается.</b><p> Клиентское представление разработано, но индекс в клиентском представлении необходимо перестроить, используя код, аналогичный новому индексу для счетов-фактур.</p>ным кодом Invoiceplane. В этом направлении достигнут прогресс, особенно в отношении вкладки «Электронная почта».</p><p> Все формы необходимо модифицировать, заменив HTML-код на PHP-структуру форм Yii3.<p> Шаблон электронного письма</p><p>Необходимо разработать пользовательские поля.</p><p> Теперь клиент может получить доступ к коммерческому предложению, используя url_key в браузере. Администратор получает url_key внизу предложения и вставляет его в электронное письмо. Для проверки возможности входа клиента войдите в систему как пользователь с ролью наблюдателя с user_id 7 (после 6 фиктивных пользователей в демонстрации). Клиенту может быть отправлен url_key (вместо самого предложения) по электронной почте. Затем пользователь может принять или отклонить предложение онлайн, используя этот url_key. После принятия предложения администратор может скопировать его в счет-фактуру.</p><p> <b>6 ноября 2025 г.</b></p><p> <b>Интеграция TypeScript 6.0 и Angular с ESLint успешно завершена.</b></p><p> Успешно выполнено обновление до TypeScript 6.0-dev.20251105 с совместимостью с Angular ESLint благодаря стратегическому согласованию с экосистемой Google. Этот подход использовал синергию разработки Google Chrome + Angular ESLint + TypeScript.</p><p> <b>Ключевые технические достижения:</b></p><ul><li> <b>Интеграция с TypeScript 6.0-dev:</b> TypeScript 6.0.0-dev.20251105 успешно установлен и настроен для использования передовых языковых возможностей.</li><li> <b>Совместимость с Angular ESLint:</b> Устранены конфликты зависимостей за счет использования экосистемы Angular ESLint от Google, которая имеет более гибкие ограничения по версиям TypeScript.</li><li> <b>Стратегия принудительной установки:</b> использовалась команда `npm install --force` для обхода ограничений зависимостей, полагаясь на внутреннее тестирование Google с более новыми версиями TypeScript.</li><li> <b>Проверка целостности системы сборки:</b> время сборки поддерживалось на уровне 8 мс при использовании esbuild с целевой версией ES2024, что подтверждает отсутствие снижения производительности.</li><li> <b>Улучшенные инструменты сборки:</b> расширенные возможности m.bat и Makefile с управлением обновлениями npm, эквивалентным устаревшей функциональности Composer.</li></ul><p> <b>Преимущества согласования экосистемы:</b></p><ul><li> <b>Интеграция с Google Chrome:</b> идеальная синергия между браузером Google и инструментами разработки Angular от Google.</li><li> <b>Архитектура, ориентированная на будущее:</b> команда Angular ESLint, вероятно, имеет ранний доступ к плану развития TypeScript и тестирует его на версиях для разработчиков.</li><li> <b>Современные веб-стандарты:</b> Angular использует новейшие возможности JavaScript/TypeScript в соответствии с реализацией ES2024.</li><li> <b>Передовая совместимость:</b> экосистема Google, разработанная для сложных сценариев разработки.</li></ul><p> <b>Технические детали реализации:</b></p><ul><li> <b>Управление пакетами:</b> Добавлены @angular-eslint/eslint-plugin@^20.5.1 и @angular-eslint/template-parser@^20.5.1</li><li> <b>Стратегия переопределения:</b> Реализовано переопределение зависимостей для @typescript-eslint/utils, @typescript-eslint/types и @typescript-eslint/typescript-estree.</li><li> <b>Разрешение зависимостей:</b> использован флаг --force для обхода проверки зависимостей npm с сохранением функциональной целостности.</li><li> <b>Инструменты обновления npm:</b> улучшенные скрипты сборки с npm-check-updates, предоставляющие эквивалентную функциональность для устаревших версий Composer.</li></ul><p> <b>Результаты проверки:</b></p><ul><li> ✅ TypeScript 6.0-dev: Активен и успешно компилируется</li><li> ✅ Angular ESLint: установлен и готов к современной разработке на TypeScript.</li><li> ✅ Производительность сборки: Поддерживается время компиляции 8 мс</li><li> ✅ Особенности ES2024: Полная совместимость сохранена</li><li> ✅ Рабочий процесс разработки: улучшен благодаря комплексным инструментам управления npm.</li></ul><p> <b>Стратегический успех:</b> подход, основанный на экосистеме Google, оказался лучше, чем попытки обеспечить совместимость со стандартными парсерами TypeScript ESLint. Инструменты разработки Angular разработаны с учетом обратной совместимости и передовых функций TypeScript, что делает их оптимальным решением для самых современных сред разработки.</p><p> <b>Результат:</b> Успешно достигнута совместимость с средой разработки TypeScript 6.0 с надлежащей инфраструктурой проверки синтаксиса, что демонстрирует ценность выбора инструментов, соответствующих экосистеме, для сложных сценариев разработки.</p>
